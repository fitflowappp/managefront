{"version":3,"sources":["../../src/containers/Challenges.js"],"names":["Challenges","props","state","condition","sortkey","sorttype","componentDidMount","location","query","setState","componentDidUpdate","prevProps","prevState","queryChallenges","setCondition","Number","router","replace","pathname","render","challenges","list","bind","map","challenge","index","id","code","title","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;AAGA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAVA;;;IAWMA,U;;;AACF,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA,mEACf,sBAAMA,KAAN,CADe;;AAEf,cAAKC,KAAL,GAAa;AACTC,uBAAU;AACNC,yBAAQ,IADF;AAENC,0BAAS,CAFH,CAEM;AAFN;AADD,SAAb;AAFe;AAQlB;;yBACDC,iB,gCAAoB;AAChB,YAAIH,YAAU,KAAKF,KAAL,CAAWM,QAAX,CAAoBC,KAAlC;AACA,YAAG,CAACL,UAAUC,OAAd,EAAsB;AAClBD,wBAAU,KAAKD,KAAL,CAAWC,SAArB;AACH,SAFD,MAEK;;AAED,iBAAKM,QAAL,CAAc;AACVN,2BAAUA;AADA,aAAd;AAGH;AACD,aAAKK,KAAL,CAAWL,SAAX;AACH,K;;yBACDO,kB,+BAAmBC,S,EAAWC,S,EAAW,CAExC,C;;yBACDJ,K,kBAAML,S,EAAW;AAAA,YACNU,eADM,GACa,KAAKZ,KADlB,CACNY,eADM;;AAEbA,wBAAgBV,SAAhB;AACH,K;;yBACDW,Y,yBAAaV,O,EAAQ;AACjB,YAAID,YAAU,KAAKD,KAAL,CAAWC,SAAzB;AACA,YAAIE,QAAJ;;AAEA,YAAGD,WAASD,UAAUC,OAAtB,EAA8B;AAC1BC,uBAASU,OAAO,CAACZ,UAAUE,QAAlB,CAAT;AACH,SAFD,MAEK;AACDA,uBAAS,CAAT;AACH;;AAEDF,kBAAUC,OAAV,GAAkBA,OAAlB;AACAD,kBAAUE,QAAV,GAAmBA,QAAnB;;AAEA,aAAKI,QAAL,CAAcN,SAAd;AACA,aAAKK,KAAL,CAAWL,SAAX;AACA,aAAKF,KAAL,CAAWe,MAAX,CAAkBC,OAAlB,CAA0B,EAACC,UAAU,KAAKjB,KAAL,CAAWM,QAAX,CAAoBW,QAA/B,EAAyCV,OAAOL,SAAhD,EAA1B;AACH,K;;yBACDgB,M,qBAAS;AACL,YAAMC,aAAa,KAAKnB,KAAL,CAAWmB,UAAX,CAAsBC,IAAtB,IAA4B,EAA/C;AACA,YAAIlB,YAAU,KAAKD,KAAL,CAAWC,SAAzB;AACA,eACI;AAAA;AAAA;AACI,mEAAQ,OAAM,YAAd,GADJ;AAEI;AAAA;AAAA,kBAAK,WAAU,KAAf;AACI;AAAA;AAAA,sBAAK,WAAU,YAAf;AACI;AAAA;AAAA,0BAAI,WAAU,WAAd;AAAA;AAAA,qBADJ;AAEI;AAAA;AAAA,0BAAK,WAAU,WAAf;AACI;AAAA;AAAA,8BAAM,IAAI,mBAAV;AACI;AAAA;AAAA,kCAAQ,MAAK,QAAb,EAAuB,WAAU,wBAAjC;AAAA;AAAA;AADJ,yBADJ;AAII;AAAA;AAAA,8BAAM,IAAI,mBAAV;AACI;AAAA;AAAA,kCAAQ,MAAK,QAAb,EAAuB,WAAU,kBAAjC;AAAA;AAAA;AADJ,yBAJJ;AAOI;AAAA;AAAA,8BAAQ,MAAK,QAAb,EAAsB,WAAU,kCAAhC;AACI,iEAAG,WAAU,gBAAb,GADJ;AAAA;AAAA;AAPJ;AAFJ,iBADJ;AAeI;AAAA;AAAA,sBAAK,WAAU,UAAf;AACI;AAAA;AAAA,0BAAQ,WAAU,gCAAlB;AACI;AAAA;AAAA;AACA;AAAA;AAAA,kCAAI,MAAK,KAAT;AACI;AAAA;AAAA,sCAAI,WAAWA,UAAUC,OAAV,IAAmB,IAAnB,GAAyBD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAA1D,GAA0E,SAAzF,EAAoG,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,IAA5B,CAA7G;AAAA;AAAA,iCADJ;AAEI;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,MAAnB,GAA2BD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAA5D,GAA4E,SAA3F,EAAsG,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,MAA5B,CAA/G;AAAA;AAAA,iCAFJ;AAGI;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,OAAnB,GAA4BD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAA7D,GAA6E,SAA5F,EAAuG,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,OAA5B,CAAhH;AAAA;AAAA,iCAHJ;AAII;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,UAAnB,GAA+BD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAAhE,GAAgF,SAA/F,EAA0G,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,UAA5B,CAAnH;AAAA;AAAA,iCAJJ;AAKI;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,cAAnB,GAAmCD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAApE,GAAoF,SAAnG,EAA8G,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,cAA5B,CAAvH;AAAA;AAAA,iCALJ;AAMI;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,gBAAnB,GAAqCD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAAtE,GAAsF,SAArG,EAAgH,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,gBAA5B,CAAzH;AAAA;AAAA,iCANJ;AAOI;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,cAAnB,GAAmCD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAApE,GAAoF,SAAnG,EAA8G,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,cAA5B,CAAvH;AAAA;AAAA,iCAPJ;AAQI;AAAA;AAAA,sCAAI,WAAWnB,UAAUC,OAAV,IAAmB,gBAAnB,GAAqCD,UAAUE,QAAV,GAAmB,aAAnB,GAAiC,cAAtE,GAAsF,SAArG,EAAgH,SAAS,KAAKS,YAAL,CAAkBQ,IAAlB,CAAuB,IAAvB,EAA4B,gBAA5B,CAAzH;AAAA;AAAA;AARJ;AADA,yBADJ;AAaI;AAAA;AAAA;AACCF,uCAAWG,GAAX,CAAe,UAACC,SAAD,EAAYC,KAAZ;AAAA,uCACZ;AAAA;AAAA,sCAAI,KAAKA,KAAT;AACI;AAAA;AAAA;AAAI;AAAA;AAAA,8CAAM,IAAI,qBAAmBD,UAAUE,EAAvC;AAA4CF,sDAAUE;AAAtD;AAAJ,qCADJ;AAEI;AAAA;AAAA;AAAKF,kDAAUG;AAAf,qCAFJ;AAGI;AAAA;AAAA;AAAKH,kDAAUI;AAAf,qCAHJ;AAII,6EAJJ;AAKI,6EALJ;AAMI,6EANJ;AAOI,6EAPJ;AAQI;AARJ,iCADY;AAAA,6BAAf;AADD;AAbJ;AADJ;AAfJ;AAFJ,SADJ;AAqEH,K;;;;;AAEL,SAASC,eAAT,CAAyB3B,KAAzB,EAAgC;AAC5B,WAAO;AACHkB,oBAAYlB,MAAMkB;AADf,KAAP;AAGH;AACD;AACA,SAASU,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,WAAO,2DAAsCA,QAAtC,CAAP;AACH;;AAED;kBACe,yBAAQF,eAAR,EAAyBC,kBAAzB,EAA6C,6BAAW9B,UAAX,CAA7C,C","file":"Challenges.js","sourcesContent":["/**\r\n * Created by qwr on 2017/9/18.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport Helmet from \"react-helmet\"\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {Link, withRouter} from \"react-router\";\r\nimport {Col, Pagination} from \"react-bootstrap\"\r\nimport {challengesActions} from '../actions'\r\nimport Alert from '../components/Alert';\r\nclass Challenges extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            condition:{\r\n                sortkey:'id',\r\n                sorttype:1, //1升0降\r\n            },\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        var condition=this.props.location.query;\r\n        if(!condition.sortkey){\r\n            condition=this.state.condition;\r\n        }else{\r\n\r\n            this.setState({\r\n                condition:condition,\r\n            })\r\n        }\r\n        this.query(condition);\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n    query(condition) {\r\n        const {queryChallenges} = this.props;\r\n        queryChallenges(condition);\r\n    }\r\n    setCondition(sortkey){\r\n        var condition=this.state.condition;\r\n        var sorttype;\r\n\r\n        if(sortkey==condition.sortkey){\r\n            sorttype=Number(!condition.sorttype);\r\n        }else{\r\n            sorttype=1;\r\n        }\r\n\r\n        condition.sortkey=sortkey;\r\n        condition.sorttype=sorttype;\r\n\r\n        this.setState(condition);\r\n        this.query(condition);\r\n        this.props.router.replace({pathname: this.props.location.pathname, query: condition});\r\n    }\r\n    render() {\r\n        const challenges = this.props.challenges.list||[];\r\n        var condition=this.state.condition;\r\n        return (\r\n            <div>\r\n                <Helmet title=\"Challenges\"/>\r\n                <div className=\"box\">\r\n                    <div className=\"box-header\">\r\n                        <h3 className=\"box-title\">Challenges</h3>\r\n                        <div className=\"box-tools\">\r\n                            <Link to={'/challengesorders'}>\r\n                                <button type=\"button\"  className=\"btn  btn-default m-r10\">Manage Challenge Order</button>\r\n                            </Link>\r\n                            <Link to={'/challengesedit/0'}>\r\n                                <button type=\"button\"  className=\"btn  btn-primary\">Create New Challenge</button>\r\n                            </Link>\r\n                            <button type=\"button\" className=\"btn btn-success pull-right m-l10\">\r\n                                <i className=\"fa fa-download\"></i>Export csv\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"box-body\">\r\n                        <table  className=\"table table-bordered dataTable\">\r\n                            <thead>\r\n                            <tr role=\"row\">\r\n                                <th className={condition.sortkey=='id'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'id')}>ID</th>\r\n                                <th className={condition.sortkey=='code'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'code')}>Code</th>\r\n                                <th className={condition.sortkey=='title'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'title')}>Title</th>\r\n                                <th className={condition.sortkey=='duration'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'duration')}>Sequence in Challenge Homepage</th>\r\n                                <th className={condition.sortkey=='timesStarted'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'timesStarted')}>times started</th>\r\n                                <th className={condition.sortkey=='timesCompleted'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'timesCompleted')}>times completed</th>\r\n                                <th className={condition.sortkey=='usersStarted'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'usersStarted')}>unique users started</th>\r\n                                <th className={condition.sortkey=='usersCompleted'?(condition.sorttype?\"sorting_asc\":\"sorting_desc\"):'sorting'} onClick={this.setCondition.bind(this,'usersCompleted')}>unique users completed</th>\r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            {challenges.map((challenge, index) =>\r\n                                <tr key={index}>\r\n                                    <td><Link to={'/challengesedit/'+challenge.id}>{challenge.id}</Link></td>\r\n                                    <td>{challenge.code}</td>\r\n                                    <td>{challenge.title}</td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                    <td></td>\r\n                                </tr>\r\n                            )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {/*<div className=\"box-footer clearfix\">\r\n                     <div className=\"pull-right\">\r\n                     <Pagination\r\n                     prev\r\n                     next\r\n                     first\r\n                     last\r\n                     ellipsis\r\n                     boundaryLinks\r\n                     items={3}\r\n                     maxButtons={5}\r\n                     activePage={this.state.activePage}\r\n                     onSelect={this.handleSelect.bind(this)}\r\n                     />\r\n                     </div>\r\n                     </div>*/}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        challenges: state.challenges\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators(challengesActions, dispatch)\r\n}\r\n\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Challenges))"]}