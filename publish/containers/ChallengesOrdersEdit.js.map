{"version":3,"sources":["../../src/containers/ChallengesOrdersEdit.js"],"names":["ChallengesOrderEdit","props","state","challengeOrder","challenges","success","componentDidMount","id","routeParams","getChallengeOrders","that","res","content","setState","componentDidUpdate","prevProps","prevState","save","event","preventDefault","putChallengeOrders","result","code","info","msg","pushChallenges","obj","push","upChallenge","index","before","after","delChallenge","confirm","title","body","surecb","splice","openChallengesListModal","refs","getWrappedInstance","openModal","back","router","goBack","render","bind","map","challenge","fontSize","mapStateToProps","challengeorders","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;AAGA;;;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;;;;;IACMA,mB;;;AACF,iCAAYC,KAAZ,EAAmB;AAAA;;AAAA,mEACf,sBAAMA,KAAN,CADe;;AAEf,cAAKC,KAAL,GAAa;AACTC,4BAAe;AACXC,4BAAW;AADA,aADN;AAITC,qBAAQ;AAJC,SAAb;AAFe;AAQlB;;kCACDC,iB,gCAAoB;AAChB,YAAIC,KAAG,KAAKN,KAAL,CAAWO,WAAX,CAAuBD,EAA9B;AACA,YAAGA,MAAI,CAAP,EAAS;AAAA,gBACEE,kBADF,GACwB,KAAKR,KAD7B,CACEQ,kBADF;;AAEL,gBAAMC,OAAK,IAAX;AACAD,+BAAmB,EAACF,IAAGA,EAAJ,EAAnB,EAA2B,UAAUI,GAAV,EAAe;AACtC,oBAAG,CAACA,IAAIC,OAAJ,CAAYR,UAAhB,EAA2B;AACvBO,wBAAIC,OAAJ,CAAYR,UAAZ,GAAuB,EAAvB;AACH;AACDM,qBAAKG,QAAL,CAAc;AACVV,oCAAeQ,IAAIC;AADT,iBAAd;AAGH,aAPD;AAQH;AACJ,K;;kCACDE,kB,+BAAmBC,S,EAAWC,S,EAAW,CAExC,C;;kCACDC,I,iBAAKC,K,EAAM;AACPA,cAAMC,cAAN;AADO,YAEAC,kBAFA,GAEsB,KAAKnB,KAF3B,CAEAmB,kBAFA;;AAGP,YAAIV,OAAK,IAAT;AACAU,2BAAmB,KAAKlB,KAAL,CAAWC,cAA9B,EAA6C,UAAUQ,GAAV,EAAe;AACxD,gBAAGA,IAAIU,MAAJ,CAAWC,IAAX,IAAiB,CAApB,EAAsB;AAClBZ,qBAAKG,QAAL,CAAc;AACVR,6BAAQ;AADE,iBAAd;AAGH;AACD,4BAAMkB,IAAN,CAAW,EAACA,MAAKZ,IAAIU,MAAJ,CAAWG,GAAjB,EAAX;AACH,SAPD;AAQH,K;;kCACDC,c,2BAAeC,G,EAAI;AACf,YAAIvB,iBAAiB,KAAKD,KAAL,CAAWC,cAAhC;AACAA,uBAAeC,UAAf,CAA0BuB,IAA1B,CAA+BD,GAA/B;AACA,aAAKb,QAAL,CAAcV,cAAd;AACH,K;;kCACDyB,W,wBAAYC,K,EAAM;AACd,YAAI1B,iBAAiB,KAAKD,KAAL,CAAWC,cAAhC;AACA,YAAIC,aAAWD,eAAeC,UAA9B;AACA,YAAGyB,SAAO,CAAV,EAAY;AACR,gBAAIC,SAAO1B,WAAWyB,QAAM,CAAjB,CAAX;AACA,gBAAIE,QAAM3B,WAAWyB,KAAX,CAAV;AACAzB,uBAAWyB,QAAM,CAAjB,IAAoBE,KAApB;AACA3B,uBAAWyB,KAAX,IAAkBC,MAAlB;AACA,iBAAKjB,QAAL,CAAcV,cAAd;AACH;AACJ,K;;kCACD6B,Y,yBAAaH,K,EAAO;AAChB,YAAInB,OAAK,IAAT;AACA,wBAAMuB,OAAN,CAAc;AACVC,mBAAO,IADG,EACGC,MAAM,OADT,EACkBC,QAAQ,kBAAY;AAC5C,oBAAIjC,iBAAiBO,KAAKR,KAAL,CAAWC,cAAhC;AACAA,+BAAeC,UAAf,CAA0BiC,MAA1B,CAAiCR,KAAjC,EAAwC,CAAxC;AACAnB,qBAAKG,QAAL,CAAcV,cAAd;AACH;AALS,SAAd;AAOH,K;;kCACDmC,uB,sCAAyB;AACrB,aAAKC,IAAL,CAAU,qBAAV,EAAiCC,kBAAjC,GAAsDC,SAAtD;AACH,K;;kCACDC,I,mBAAM;AACF,aAAKzC,KAAL,CAAW0C,MAAX,CAAkBC,MAAlB;AACH,K;;kCACDC,M,qBAAS;AAAA;;AACL,YAAMzC,aAAa,KAAKF,KAAL,CAAWC,cAAX,CAA0BC,UAA7C;AACA,YAAIC,UAAQ,KAAKH,KAAL,CAAWG,OAAvB;AACA,eACI;AAAA;AAAA;AACI,mEAAQ,OAAM,wBAAd,GADJ;AAEI,2EAAqB,KAAI,qBAAzB,EAA+C,gBAAgB,KAAKoB,cAAL,CAAoBqB,IAApB,CAAyB,IAAzB,CAA/D,GAFJ;AAGKzC,uBAAS;AAAA;AAAA,kBAAK,WAAU,qCAAf;AAAA;AAAA,aAHd;AAII;AAAA;AAAA,kBAAK,WAAU,KAAf;AACI;AAAA;AAAA,sBAAK,WAAU,YAAf;AACI;AAAA;AAAA,0BAAI,WAAU,WAAd;AAAA;AAAA;AADJ,iBADJ;AAII;AAAA;AAAA,sBAAM,MAAK,MAAX,EAAmB,UAAY,KAAKY,IAAL,CAAU6B,IAAV,CAAe,IAAf,CAA/B;AACI;AAAA;AAAA,0BAAK,WAAU,UAAf;AACK1C,sCAAYA,WAAW2C,GAAX,CAAe,UAACC,SAAD,EAAYnB,KAAZ;AAAA,mCACxB;AAAA;AAAA,kCAAK,KAAKA,KAAV,EAAiB,WAAU,MAA3B;AACI,qEAAG,SAAS,OAAKD,WAAL,CAAiBkB,IAAjB,SAA2BjB,KAA3B,CAAZ,EAA+C,WAAU,2CAAzD,EAAqG,OAAO,EAACoB,UAAS,MAAV,EAA5G,GADJ;AAAA;AAEYD,0CAAU1B,IAFtB;AAAA;AAE6B0B,0CAAUd,KAFvC;AAGI,qEAAG,SAAS,OAAKF,YAAL,CAAkBc,IAAlB,SAA4BjB,KAA5B,CAAZ,EAAgD,WAAU,uCAA1D,EAAkG,OAAO,EAACoB,UAAS,MAAV,EAAzG;AAHJ,6BADwB;AAAA,yBAAf,CADjB;AAQI,6DAAG,SAAS,KAAKX,uBAAL,CAA6BQ,IAA7B,CAAkC,IAAlC,CAAZ,EAAqD,WAAU,wCAA/D,EAAwG,OAAO,EAACG,UAAS,MAAV,EAA/G;AARJ,qBADJ;AAWI;AAAA;AAAA,0BAAK,WAAU,qBAAf;AACI;AAAA;AAAA;AACI;AAAA;AAAA,kCAAK,IAAI,EAAT,EAAa,WAAU,iBAAvB;AACI;AAAA;AAAA,sCAAQ,MAAK,QAAb,EAAuB,WAAU,kBAAjC;AAAA;AAAA,iCADJ;AAEI;AAAA;AAAA,sCAAQ,MAAK,QAAb,EAAsB,WAAU,uBAAhC,EAAwD,SAAS,KAAKP,IAAL,CAAUI,IAAV,CAAe,IAAf,CAAjE;AAAA;AAAA;AAFJ;AADJ;AADJ;AAXJ;AAJJ;AAJJ,SADJ;AAiCH,K;;;qBAzHL;;;;;AA2HA,SAASI,eAAT,CAAyBhD,KAAzB,EAAgC;AAC5B,WAAO;AACHiD,yBAAiBjD,MAAMiD;AADpB,KAAP;AAGH;AACD;AACA,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,WAAO,gEAA2CA,QAA3C,CAAP;AACH;;AAED;kBACe,yBAAQH,eAAR,EAAyBE,kBAAzB,EAA6C,6BAAWpD,mBAAX,CAA7C,C","file":"ChallengesOrdersEdit.js","sourcesContent":["/**\r\n * Created by qwr on 2017/9/18.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport Helmet from \"react-helmet\"\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {Link, withRouter} from \"react-router\";\r\nimport {Col, Form, Pagination, Row} from \"react-bootstrap\"\r\nimport {challengeordersActions} from '../actions'\r\nimport Alert from '../components/Alert';\r\nimport ChallengesListModal from '../components/modal/ChallengesListModal';\r\nclass ChallengesOrderEdit extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            challengeOrder:{\r\n                challenges:[],\r\n            },\r\n            success:false,\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        var id=this.props.routeParams.id;\r\n        if(id!=0){\r\n            const {getChallengeOrders} = this.props;\r\n            const that=this;\r\n            getChallengeOrders({id:id},function (res) {\r\n                if(!res.content.challenges){\r\n                    res.content.challenges=[];\r\n                }\r\n                that.setState({\r\n                    challengeOrder:res.content,\r\n                })\r\n            })\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n    save(event){\r\n        event.preventDefault();\r\n        const {putChallengeOrders} = this.props;\r\n        var that=this;\r\n        putChallengeOrders(this.state.challengeOrder,function (res) {\r\n            if(res.result.code==1){\r\n                that.setState({\r\n                    success:true,\r\n                })\r\n            }\r\n            Alert.info({info:res.result.msg});\r\n        });\r\n    }\r\n    pushChallenges(obj){\r\n        var challengeOrder = this.state.challengeOrder;\r\n        challengeOrder.challenges.push(obj);\r\n        this.setState(challengeOrder);\r\n    }\r\n    upChallenge(index){\r\n        var challengeOrder = this.state.challengeOrder;\r\n        var challenges=challengeOrder.challenges;\r\n        if(index!=0){\r\n            var before=challenges[index-1];\r\n            var after=challenges[index];\r\n            challenges[index-1]=after;\r\n            challenges[index]=before;\r\n            this.setState(challengeOrder);\r\n        }\r\n    }\r\n    delChallenge(index) {\r\n        var that=this;\r\n        Alert.confirm({\r\n            title: '删除', body: \"确定删除？\", surecb: function () {\r\n                var challengeOrder = that.state.challengeOrder;\r\n                challengeOrder.challenges.splice(index, 1);\r\n                that.setState(challengeOrder);\r\n            }\r\n        });\r\n    }\r\n    openChallengesListModal(){\r\n        this.refs['ChallengesListModal'].getWrappedInstance().openModal();\r\n    }\r\n    back(){\r\n        this.props.router.goBack();\r\n    }\r\n    render() {\r\n        const challenges = this.state.challengeOrder.challenges;\r\n        var success=this.state.success;\r\n        return (\r\n            <div>\r\n                <Helmet title=\"Manage Challenge Order\"/>\r\n                <ChallengesListModal ref=\"ChallengesListModal\" pushChallenges={this.pushChallenges.bind(this)}/>\r\n                {success&&<div className=\"callout callout-success text-center\">Your changes have been succesfully saved</div>}\r\n                <div className=\"box\">\r\n                    <div className=\"box-header\">\r\n                        <h3 className=\"box-title\">Manage Challenge Order</h3>\r\n                    </div>\r\n                    <Form role=\"form\"  onSubmit = {this.save.bind(this)}>\r\n                        <div className=\"box-body\">\r\n                            {challenges&&challenges.map((challenge, index) =>\r\n                                <div key={index} className=\"m-b5\">\r\n                                    <i onClick={this.upChallenge.bind(this,index)} className=\"fa fa-arrow-up text-primary pointer m-r10\" style={{fontSize:'20px'}}></i>\r\n                                    Routine{challenge.code}:{challenge.title}\r\n                                    <i onClick={this.delChallenge.bind(this,index)} className=\"fa fa-close text-danger pointer m-l10\" style={{fontSize:'20px'}}></i>\r\n                                </div>\r\n                            )}\r\n                            <i onClick={this.openChallengesListModal.bind(this)} className=\"fa fa-plus-square text-primary pointer\" style={{fontSize:'40px'}}></i>\r\n                        </div>\r\n                        <div className=\"box-footer clearfix\">\r\n                            <Row>\r\n                                <Col lg={12} className=\"col-md-offset-3\">\r\n                                    <button type=\"submit\"  className=\"btn  btn-primary\" >Save</button>\r\n                                    <button type=\"button\" className=\"btn btn-default m-l10\" onClick={this.back.bind(this)}>Back</button>\r\n                                </Col>\r\n                            </Row>\r\n                        </div>\r\n                    </Form>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        challengeorders: state.challengeorders\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators(challengeordersActions, dispatch)\r\n}\r\n\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(ChallengesOrderEdit))\r\n"]}