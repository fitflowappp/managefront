{"version":3,"sources":["../../src/containers/App.js"],"names":["App","props","state","pathname","location","componentDidMount","componentWillReceiveProps","nextProps","setState","logout","remove","push","render","user","routes","name","headerImg","contentUri","children","mapStateToProps","app","mapDispatchToProps","dispatch"],"mappings":"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","file":"App.js","sourcesContent":["/**\r\n * Created by john on 2016/5/16.\r\n */\r\nimport React, {Component, PropTypes} from 'react';\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux';\r\nimport {withRouter, browserHistory} from \"react-router\";\r\nimport {getMuser, logout} from \"../common/auth\";\r\nimport cookie from 'react-cookie'\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            pathname: props.location.pathname,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        var pathname = nextProps.location.pathname;\r\n        if (this.state.pathname != pathname) {\r\n            this.setState({\r\n                pathname: pathname\r\n            })\r\n        }\r\n    }\r\n\r\n    //退出登录\r\n    logout() {\r\n        cookie.remove(\"muser\");\r\n        browserHistory.push('/');\r\n    }\r\n\r\n    render() {\r\n        const user = getMuser();\r\n        const pathname=this.props.routes[1].name;\r\n        return (\r\n           <div>\r\n               {user&&<div className=\"wrapper fixed\">\r\n                   <header className=\"main-header\">\r\n                       <a href=\"/\" className=\"logo\">\r\n                           <span className=\"logo-mini\">yoga</span>\r\n                           <span className=\"logo-lg\"><b>yoga</b>manage</span>\r\n                       </a>\r\n                       <nav className=\"navbar navbar-static-top\" role=\"navigation\">\r\n                           <a href=\"#\" className=\"sidebar-toggle\" data-toggle=\"push-menu\" role=\"button\"></a>\r\n                           <div className=\"navbar-custom-menu\">\r\n                               <ul className=\"nav navbar-nav\">\r\n                                   <li><img src={user.headerImg ? user.headerImg.contentUri : '/dist/images/user.jpg'}\r\n                                            alt=\"头像\" width={30} className=\"img-circle m-t10\"/></li>\r\n                                   <li><a href=\"/\">{user ? user.name : \"无\"}</a></li>\r\n                                   <li><a href=\"#\" onClick={this.props.logout}>退出</a></li>\r\n                               </ul>\r\n                           </div>\r\n                       </nav>\r\n                   </header>\r\n                   <aside className=\"main-sidebar\">\r\n                       <section className=\"sidebar\">\r\n                           <ul className=\"sidebar-menu tree\" data-widget=\"tree\">\r\n                               <li className={pathname=='dashboard'?\"active\":\"\"}>\r\n                                   <a href=\"/dashboard\">\r\n                                       <span>dashboard</span>\r\n                                   </a>\r\n                               </li>\r\n                               <li className={(pathname=='routines'||pathname=='routinesedit')?\"active\":\"\"}>\r\n                                   <a href=\"/routines\">\r\n                                       <span>routines</span>\r\n                                   </a>\r\n                               </li>\r\n                               <li className={pathname=='workouts'?\"active\":\"\"}>\r\n                                   <a href=\"/workouts\">\r\n                                       <span>workouts</span>\r\n                                   </a>\r\n                               </li>\r\n                               <li className={pathname=='challenges'?\"active\":\"\"}>\r\n                                   <a href=\"/challenges\">\r\n                                       <span>challenges</span>\r\n                                   </a>\r\n                               </li>\r\n                               <li className={pathname=='users'?\"active\":\"\"}>\r\n                                   <a href=\"/users\">\r\n                                       <span>users</span>\r\n                                   </a>\r\n                               </li>\r\n                               <li className={pathname=='milestones'?\"active\":\"\"}>\r\n                                   <a href=\"/milestones\">\r\n                                       <span>milestones</span>\r\n                                   </a>\r\n                               </li>\r\n                           </ul>\r\n                       </section>\r\n                   </aside>\r\n                   <div className=\"content-wrapper\">\r\n                       {this.props.children}\r\n                   </div>\r\n                   <footer className=\"main-footer\">\r\n                       <div className=\"pull-right hidden-xs\"><b>Version</b> 1.0.0</div>\r\n                       <strong>Copyright © 2017 <a href=\"/\">yoga manage</a>.</strong>\r\n                   </footer>\r\n               </div>}\r\n               {!user&&\r\n               this.props.children\r\n               }\r\n           </div>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators({logout}, dispatch)\r\n}\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App))\r\n\r\n"]}