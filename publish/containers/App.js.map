{"version":3,"sources":["../../src/containers/App.js"],"names":["App","props","nav","name","item","state","pathname","location","componentDidMount","componentWillReceiveProps","nextProps","setState","getdropdown","lists","items","i","push","getNavItem","rows","startsWith","logout","remove","render","user","headerImg","contentUri","children","mapStateToProps","app","mapDispatchToProps","dispatch"],"mappings":";;;;;;;;;;;;;;;;;;AAGA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AAVA;;;IAWMA,G;;;AACF,iBAAYC,KAAZ,EAAkB;AAAA;;AAAA,mEACd,sBAAMA,KAAN,CADc;;AAEd,cAAKC,GAAL,GAAW;AACP,wBAAY,EAACC,MAAM,MAAP,EADL;AAEP,4BAAe;AACXA,sBAAM,MADK;AAEXC,sBAAM;AACF,yCAAqB,EAACD,MAAM,MAAP;AADnB;AAFK;AAFR,SAAX;AASA,cAAKE,KAAL,GAAW;AACPC,sBAASL,MAAMM,QAAN,CAAeD;AADjB,SAAX;AAXc;AAcjB;;kBACDE,iB,gCAAoB,CAEnB,C;;kBACDC,yB,sCAA0BC,S,EAAW;AACjC,YAAIJ,WAAWI,UAAUH,QAAV,CAAmBD,QAAlC;AACA,YAAI,KAAKD,KAAL,CAAWC,QAAX,IAAuBA,QAA3B,EAAqC;AACjC,iBAAKK,QAAL,CAAc;AACVL,0BAASA;AADC,aAAd;AAGH;AACJ,K;;kBACDM,W,wBAAYC,K,EAAM;AAAC;AACf,YAAIC,QAAM,EAAV;AACA,aAAK,IAAMC,CAAX,IAAgBF,KAAhB,EAAuB;AACnBC,kBAAME,IAAN,CACI;AAAA;AAAA,kBAAe,KAAKD,CAApB,EAAuB,IAAI,EAAET,UAAUS,CAAZ,EAA3B;AACI;AAAA;AAAA;AAAUF,0BAAME,CAAN,EAASZ;AAAnB;AADJ,aADJ;AAKH;AACD,eAAOW,KAAP;AACH,K;;kBAEDG,U,yBAAY;AACR,YAAIC,OAAO,EAAX;AACA,aAAK,IAAMH,CAAX,IAAgB,KAAKb,GAArB,EAA0B;AACtB,gBAAG,KAAKA,GAAL,CAASa,CAAT,EAAYX,IAAf,EAAoB;AAChBc,qBAAKF,IAAL,CACI;AAAA;AAAA,sBAAc,WAAW,KAAKX,KAAL,CAAWC,QAAX,CAAoBa,UAApB,CAA+BJ,CAA/B,IAAkC,QAAlC,GAA2C,IAApE,EAA0E,KAAKA,CAA/E,EAAkF,OAAO,KAAKb,GAAL,CAASa,CAAT,EAAYZ,IAArG,EAA2G,IAAG,eAA9G;AACK,yBAAKS,WAAL,CAAiB,KAAKV,GAAL,CAASa,CAAT,EAAYX,IAA7B;AADL,iBADJ;AAKH,aAND,MAOI;AACJc,qBAAKF,IAAL,CACI;AAAA;AAAA,sBAAe,KAAKD,CAApB,EAAuB,IAAI,EAAET,UAAUS,CAAZ,EAA3B;AACI;AAAA;AAAA;AAAU,6BAAKb,GAAL,CAASa,CAAT,EAAYZ;AAAtB;AADJ,iBADJ;AAKC;AACJ;AACD,eAAOe,IAAP;AACH,K;AACD;;;kBACCE,M,qBAAQ;AACJ,8BAAOC,MAAP,CAAc,OAAd;AACA,oCAAeL,IAAf,CAAoB,GAApB;AACH,K;;kBACFM,M,qBAAS;AACL,YAAMC,OAAK,qBAAX;AACA,eACI;AAAA;AAAA;AACI;AAAA;AAAA,kBAAQ,WAAW,EAAC,QAAO,CAACA,IAAT,EAAc,aAAY,IAA1B,EAAnB;AACI;AAAA,2CAAQ,MAAR;AAAA;AACI;AAAA,+CAAQ,KAAR;AAAA,0BAAc,WAAU,SAAxB;AAAA;AAAA;AADJ,iBADJ;AAMI;AAAA;AAAA,sBAAK,SAAQ,OAAb;AACK,yBAAKN,UAAL;AADL,iBANJ;AASKM,wBACD;AAAA;AAAA,sBAAK,WAAU,YAAf;AACI,2DAAK,KAAKA,KAAKC,SAAL,GAAeD,KAAKC,SAAL,CAAeC,UAA9B,GAAyC,uBAAnD,EAA4E,KAAI,cAAhF,EAAqF,WAAU,0BAA/F,EAA0H,OAAM,IAAhI,GADJ;AAEI;AAAA;AAAA;AACI;AAAA;AAAA,8BAAa,UAAS,GAAtB,EAA0B,OAAOF,OAAKA,KAAKpB,IAAV,GAAe,GAAhD,EAAqD,IAAG,OAAxD;AACI;AAAA;AAAA,kCAAU,SAAS,KAAKF,KAAL,CAAWmB,MAA9B;AAAA;AAAA;AADJ;AADJ;AAFJ;AAVJ,aADJ;AAqBI;AAAA;AAAA,kBAAK,WAAU,iBAAf;AACK,qBAAKnB,KAAL,CAAWyB;AADhB;AArBJ,SADJ;AA2BH,K;;;;;AAEL,SAASC,eAAT,CAAyBtB,KAAzB,EAAgC;AAC5B,WAAO;AACHuB,aAAKvB,MAAMuB;AADR,KAAP;AAGH;AACD;AACA,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,WAAO,+BAAmB,EAACV,oBAAD,EAAnB,EAA6BU,QAA7B,CAAP;AACH;AACD;kBACe,yBAAQH,eAAR,EAAyBE,kBAAzB,EAA6C,6BAAW7B,GAAX,CAA7C,C","file":"App.js","sourcesContent":["/**\r\n * Created by john on 2016/5/16.\r\n */\r\nimport React, {Component, PropTypes} from 'react';\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux';\r\nimport {Navbar,Nav, NavItem,NavDropdown,MenuItem} from 'react-bootstrap'\r\nimport {LinkContainer} from 'react-router-bootstrap'\r\nimport {withRouter,browserHistory} from \"react-router\";\r\nimport {getMuser,logout} from \"../common/auth\";\r\nimport cookie from 'react-cookie'\r\nclass App extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.nav = {\r\n            \"/account\": {name: \"账号管理\"},\r\n            \"/networkinfo\":{\r\n                name: \"人脉管理\",\r\n                item: {\r\n                    \"/networkinfo/list\": {name: \"人脉列表\"},\r\n                }\r\n            }\r\n        };\r\n        this.state={\r\n            pathname:props.location.pathname,\r\n        }\r\n    }\r\n    componentDidMount() {\r\n\r\n    }\r\n    componentWillReceiveProps(nextProps) {\r\n        var pathname = nextProps.location.pathname;\r\n        if (this.state.pathname != pathname) {\r\n            this.setState({\r\n                pathname:pathname\r\n            })\r\n        }\r\n    }\r\n    getdropdown(lists){//遍历下拉菜单选项\r\n        var items=[];\r\n        for (const i in lists) {\r\n            items.push(\r\n                <LinkContainer key={i} to={{ pathname: i}}>\r\n                    <NavItem>{lists[i].name}</NavItem>\r\n                </LinkContainer>\r\n            );\r\n        }\r\n        return items;\r\n    }\r\n    \r\n    getNavItem(){\r\n        var rows = [];\r\n        for (const i in this.nav) {\r\n            if(this.nav[i].item){\r\n                rows.push(\r\n                    <NavDropdown  className={this.state.pathname.startsWith(i)?\"active\":null} key={i} title={this.nav[i].name} id=\"checkDropdown\">\r\n                        {this.getdropdown(this.nav[i].item)}\r\n                    </NavDropdown>\r\n                );\r\n            }\r\n            else{\r\n            rows.push(\r\n                <LinkContainer key={i} to={{ pathname: i }}>\r\n                    <NavItem>{this.nav[i].name}</NavItem>\r\n                </LinkContainer>\r\n            );\r\n            }\r\n        }\r\n        return rows;\r\n    }\r\n    //退出登录\r\n     logout(){ \r\n         cookie.remove(\"muser\");\r\n         browserHistory.push('/');\r\n     }\r\n    render() {\r\n        const user=getMuser();\r\n        return (\r\n            <div>\r\n                <Navbar className={{'hide':!user,'nav-theme':true}} >\r\n                    <Navbar.Header>\r\n                        <Navbar.Brand className=\"font-25\">\r\n                            后台\r\n                        </Navbar.Brand>\r\n                    </Navbar.Header>\r\n                    <Nav bsStyle=\"pills\" >\r\n                        {this.getNavItem()}\r\n                    </Nav>\r\n                    {user&&\r\n                    <div className=\"pull-right\">\r\n                        <img src={user.headerImg?user.headerImg.contentUri:'/dist/images/user.jpg'} alt=\"头像\" className=\"pull-left m-t10 radius-5\" width=\"30\"/>\r\n                        <Nav>\r\n                            <NavDropdown eventKey=\"0\" title={user?user.name:\"无\"} id=\"admin\">\r\n                                <MenuItem onClick={this.props.logout}>退出</MenuItem>\r\n                            </NavDropdown>\r\n                        </Nav>\r\n                    </div>}\r\n                </Navbar>\r\n\r\n                <div className=\"container m-t80\">\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        app: state.app\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators({logout}, dispatch)\r\n}\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App))\r\n\r\n"]}