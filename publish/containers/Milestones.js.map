{"version":3,"sources":["../../src/containers/Milestones.js"],"names":["Milestones","props","state","activePage","editAccount","exerciseRange","workoutsRange","componentDidMount","role","query","componentDidUpdate","prevProps","prevState","queryAccount","add","setState","refs","getWrappedInstance","openModal","edit","account","del","that","confirm","title","body","surecb","deleteAccount","res","set","e","name","target","getAttribute","value","changeRole","handleSelect","back","window","history","go","render","accounts","list","bind","width","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","file":"Milestones.js","sourcesContent":["/**\r\n * Created by qwr on 2017/9/13.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport Helmet from \"react-helmet\"\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {withRouter} from \"react-router\";\r\nimport {Col, Pagination, Row} from \"react-bootstrap\"\r\nimport {accountActions} from '../actions'\r\nimport AccountModal from '../components/modal/AccountModal';\r\nimport Alert from '../components/Alert';\r\nclass Milestones extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activePage:1,\r\n            editAccount: null,\r\n            exerciseRange:50,\r\n            workoutsRange:0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const role = this.state.role;\r\n        this.query(role);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.state.role != prevState.role) {\r\n            this.query();\r\n        }\r\n    }\r\n\r\n    query() {\r\n        const {queryAccount} = this.props;\r\n        const role = this.state.role;\r\n        queryAccount({\"role\": role});\r\n    }\r\n\r\n    add() {\r\n        this.setState({\r\n            editAccount: null,\r\n        })\r\n        this.refs['AccountModal'].getWrappedInstance().openModal();\r\n    }\r\n\r\n    edit(account) {\r\n        this.setState({\r\n            editAccount: Object.assign({}, account),\r\n        })\r\n        this.refs['AccountModal'].getWrappedInstance().openModal();\r\n    }\r\n\r\n    del(account) {\r\n        const that = this;\r\n        Alert.confirm({\r\n            title: '删除', body: \"确定删除？\", surecb: function () {\r\n                const {deleteAccount} = that.props;\r\n                deleteAccount(account, function (res) {\r\n\r\n                });\r\n            }\r\n        });\r\n    }\r\n    set(e){\r\n        const name = e.target.getAttribute('name');\r\n        const value = e.target.value;\r\n        var state = this.state;\r\n        state[name]=value;\r\n        this.setState(state)\r\n    }\r\n    changeRole(role) {\r\n        this.setState({\r\n            role: role,\r\n        });\r\n    }\r\n    handleSelect(){\r\n\r\n    }\r\n    back(){\r\n        window.history.go(-1);\r\n    }\r\n    render() {\r\n        const accounts = this.props.account.list || [];\r\n        const role = this.state.role;\r\n        return (\r\n            <div>\r\n                <Helmet title=\"Milestones\"/>\r\n                <AccountModal ref=\"AccountModal\" query={this.query.bind(this)} role={role} editAccount={this.state.editAccount}/>\r\n                <div className=\"box\">\r\n                    <div className=\"box-header\">\r\n                        <h3 className=\"box-title\">Edit Milestones</h3>\r\n                    </div>\r\n                    <div className=\"box-body\">\r\n                        <p>Users will receive an achievement after every how many total exercise minutes?</p>\r\n                        <Row style={{width:'600px'}}>\r\n                            <Col sm={2}><text>30</text></Col>\r\n                            <Col sm={8}>\r\n                                <input type=\"range\" min=\"30\" max=\"300\" name=\"exerciseRange\" className=\"pull-left\"  value={this.state.exerciseRange} step={1} onChange={this.set.bind(this)}/>\r\n                            </Col>\r\n                            <Col sm={2}><text>300</text></Col>\r\n                            <Col sm={12}><p className=\"text-center text-primary\">{this.state.exerciseRange}</p></Col>\r\n                        </Row>\r\n                        <p className=\"m-t40\">Users will receive an achievement after every how many total workouts?</p>\r\n                        <Row style={{width:'600px'}}>\r\n                            <Col sm={2}><text>1</text></Col>\r\n                            <Col sm={8}>\r\n                                <input type=\"range\" min=\"1\" max=\"20\" name=\"workoutsRange\" className=\"pull-left\"  value={this.state.workoutsRange} step={1} onChange={this.set.bind(this)}/>\r\n                            </Col>\r\n                            <Col sm={2}><text>20</text></Col>\r\n                            <Col sm={12}><p className=\"text-center text-primary\">{this.state.workoutsRange}</p></Col>\r\n                        </Row>\r\n                    </div>\r\n\r\n                    <div className=\"box-footer clearfix\">\r\n                        <button type=\"button\"  className=\"btn  btn-primary\">Save</button>\r\n                        <button type=\"button\" className=\"btn btn-default m-l10\" onClick={this.back.bind(this)}>Back</button>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        account: state.account\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators(accountActions, dispatch)\r\n}\r\n\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Milestones))"]}