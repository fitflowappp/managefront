{"version":3,"sources":["../../src/containers/Milestones.js"],"names":["Milestones","props","state","milestone","achievementMinutes","achievementMinutesContent","achievementWorkoutNum","achievementWorkoutContent","success","componentDidMount","query","componentDidUpdate","prevProps","prevState","getMileStones","that","res","content","setState","save","event","preventDefault","putMileStones","result","code","info","msg","set","e","name","target","getAttribute","value","back","window","history","go","render","bind","maxWidth","mapStateToProps","milestones","mapDispatchToProps","dispatch"],"mappings":"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","file":"Milestones.js","sourcesContent":["/**\r\n * Created by qwr on 2017/9/13.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport Helmet from \"react-helmet\"\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {withRouter} from \"react-router\";\r\nimport {Col, Form, Pagination, Panel, Row} from \"react-bootstrap\"\r\nimport {milestonesActions} from '../actions'\r\nimport Alert from '../components/Alert';\r\nclass Milestones extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            milestone:{\r\n                achievementMinutes: 0,\r\n                achievementMinutesContent: \"\",\r\n\r\n                achievementWorkoutNum: 0,\r\n                achievementWorkoutContent: \"\",\r\n            },\r\n            success:false,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.query();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n\r\n    query() {\r\n        const {getMileStones} = this.props;\r\n        const that=this;\r\n        getMileStones({},function (res) {\r\n            if(!res.content.achievementMinutesContent){\r\n                res.content.achievementMinutesContent='';\r\n            }\r\n            if(!res.content.achievementWorkoutContent){\r\n                res.content.achievementWorkoutContent='';\r\n            }\r\n            that.setState({\r\n                milestone:res.content,\r\n            })\r\n        })\r\n    }\r\n    save(event){\r\n        event.preventDefault();\r\n        const {putMileStones} = this.props;\r\n        const that=this;\r\n        putMileStones(this.state.milestone,function (res) {\r\n            if(res.result.code==1){\r\n                that.setState({\r\n                    success:true,\r\n                })\r\n            }\r\n            Alert.info({info:res.result.msg})\r\n        })\r\n    }\r\n\r\n    set(e){\r\n        const name = e.target.getAttribute('name');\r\n        const value = e.target.value;\r\n        var milestone = this.state.milestone;\r\n        milestone[name]=value;\r\n        this.setState(milestone)\r\n    }\r\n\r\n    back(){\r\n        window.history.go(-1);\r\n    }\r\n    render() {\r\n        const milestone=this.state.milestone;\r\n        const success=this.state.success;\r\n        return (\r\n            <div>\r\n                <Helmet title=\"Milestones\"/>\r\n                <div className=\"box\">\r\n                    {success&&<div className=\"callout callout-success text-center\">Your changes have been succesfully saved</div>}\r\n                    <div className=\"box-header\">\r\n                        <h3 className=\"box-title\">Edit Milestones</h3>\r\n                    </div>\r\n                    <Form role=\"form\"  onSubmit = {this.save.bind(this)}>\r\n                        <div className=\"box-body\">\r\n                            <Panel style={{maxWidth:'600px'}}>\r\n                                <p>Exercise Minutes</p>\r\n                                <p>Users will receive an achievement after every how many total exercise minutes?</p>\r\n                                <Row style={{maxWidth:'600px'}}>\r\n                                    <Col sm={2} className=\"m-t5\"><text>30</text></Col>\r\n                                    <Col sm={8} className=\"m-t5\">\r\n                                        <input type=\"range\" min=\"30\" max=\"300\" name=\"achievementMinutes\" className=\"pull-left\"  value={milestone.achievementMinutes} step={1} onChange={this.set.bind(this)}/>\r\n                                    </Col>\r\n                                    <Col sm={2} className=\"m-t5\"><text>300</text></Col>\r\n                                    <Col sm={12}><p className=\"text-center text-primary\">{milestone.achievementMinutes}</p></Col>\r\n                                    <Col sm={12} className=\"m-t5\">\r\n                                        <label  className=\"m-t5\">Pop-up box message for exercise minutes milestone:</label>\r\n                                    </Col>\r\n                                    <Col sm={12} className=\"m-t5\">\r\n                                        <input type=\"text\"  className=\"form-control\" style={{maxWidth:'615px'}} required={true} placeholder=\"\" name=\"achievementMinutesContent\" value={milestone.achievementMinutesContent} onChange={this.set.bind(this)}/>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Panel>\r\n                            <Panel style={{maxWidth:'600px'}} className=\"m-t40\">\r\n                                <p>Total Workouts</p>\r\n                                <p>Users will receive an achievement after every how many total workouts?</p>\r\n                                <Row style={{maxWidth:'600px'}}>\r\n                                    <Col sm={2}><text>1</text></Col>\r\n                                    <Col sm={8}>\r\n                                        <input type=\"range\" min=\"1\" max=\"20\" name=\"achievementWorkoutNum\" className=\"pull-left\"  value={milestone.achievementWorkoutNum} step={1} onChange={this.set.bind(this)}/>\r\n                                    </Col>\r\n                                    <Col sm={2}><text>20</text></Col>\r\n                                    <Col sm={12}><p className=\"text-center text-primary\">{milestone.achievementWorkoutNum}</p></Col>\r\n                                    <Col sm={12} className=\"m-t5\">\r\n                                        <label  className=\"m-t5\">Pop-up box message for total wokrouts milestone:</label>\r\n                                    </Col>\r\n                                    <Col sm={12} className=\"m-t5\">\r\n                                        <input type=\"text\"  className=\"form-control\" style={{maxWidth:'615px'}} required={true} placeholder=\"\" name=\"achievementWorkoutContent\" value={milestone.achievementWorkoutContent} onChange={this.set.bind(this)}/>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Panel>\r\n\r\n                        </div>\r\n\r\n                        <div className=\"box-footer clearfix\">\r\n                            <button type=\"submit\"  className=\"btn  btn-primary\">Save</button>\r\n                            <button type=\"button\" className=\"btn btn-default m-l10\" onClick={this.back.bind(this)}>Back</button>\r\n                        </div>\r\n                    </Form>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        milestones: state.milestones\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators(milestonesActions, dispatch)\r\n}\r\n\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Milestones))"]}