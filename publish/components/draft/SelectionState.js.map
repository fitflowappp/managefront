{"version":3,"sources":["../../../src/components/draft/SelectionState.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_get","get","_x","_x2","_x3","_again","_function","object","property","receiver","Function","desc","undefined","parent","value","getter","call","_classCallCheck","instance","TypeError","_inherits","subClass","superClass","constructor","__proto__","Immutable","require","Record","defaultRecord","anchorKey","anchorOffset","focusKey","focusOffset","isBackward","hasFocus","SelectionStateRecord","SelectionState","_SelectionStateRecord","apply","arguments","serialize","getAnchorKey","getAnchorOffset","getFocusKey","getFocusOffset","String","getIsBackward","getHasFocus","hasEdgeWithin","blockKey","start","end","selectionStart","getStartOffset","selectionEnd","getEndOffset","offsetToCheck","isCollapsed","getStartKey","getEndKey","createEmpty","module","exports"],"mappings":"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","file":"SelectionState.js","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule SelectionState\n * @typechecks\n * \n */\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Immutable = require('immutable');\n\nvar Record = Immutable.Record;\n\nvar defaultRecord = {\n  anchorKey: '',\n  anchorOffset: 0,\n  focusKey: '',\n  focusOffset: 0,\n  isBackward: false,\n  hasFocus: false\n};\n\nvar SelectionStateRecord = Record(defaultRecord);\n\nvar SelectionState = (function (_SelectionStateRecord) {\n  _inherits(SelectionState, _SelectionStateRecord);\n\n  function SelectionState() {\n    _classCallCheck(this, SelectionState);\n\n    _get(Object.getPrototypeOf(SelectionState.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(SelectionState, [{\n    key: 'serialize',\n    value: function serialize() {\n      return 'Anchor: ' + this.getAnchorKey() + ':' + this.getAnchorOffset() + ', ' + 'Focus: ' + this.getFocusKey() + ':' + this.getFocusOffset() + ', ' + 'Is Backward: ' + String(this.getIsBackward()) + ', ' + 'Has Focus: ' + String(this.getHasFocus());\n    }\n  }, {\n    key: 'getAnchorKey',\n    value: function getAnchorKey() {\n      return this.get('anchorKey');\n    }\n  }, {\n    key: 'getAnchorOffset',\n    value: function getAnchorOffset() {\n      return this.get('anchorOffset');\n    }\n  }, {\n    key: 'getFocusKey',\n    value: function getFocusKey() {\n      return this.get('focusKey');\n    }\n  }, {\n    key: 'getFocusOffset',\n    value: function getFocusOffset() {\n      return this.get('focusOffset');\n    }\n  }, {\n    key: 'getIsBackward',\n    value: function getIsBackward() {\n      return this.get('isBackward');\n    }\n  }, {\n    key: 'getHasFocus',\n    value: function getHasFocus() {\n      return this.get('hasFocus');\n    }\n\n    /**\n     * Return whether the specified range overlaps with an edge of the\n     * SelectionState.\n     */\n  }, {\n    key: 'hasEdgeWithin',\n    value: function hasEdgeWithin(blockKey, start, end) {\n      var anchorKey = this.getAnchorKey();\n      var focusKey = this.getFocusKey();\n\n      if (anchorKey === focusKey && anchorKey === blockKey) {\n        var selectionStart = this.getStartOffset();\n        var selectionEnd = this.getEndOffset();\n        return start <= selectionEnd && selectionStart <= end;\n      }\n\n      if (blockKey !== anchorKey && blockKey !== focusKey) {\n        return false;\n      }\n\n      var offsetToCheck = blockKey === anchorKey ? this.getAnchorOffset() : this.getFocusOffset();\n\n      return start <= offsetToCheck && end >= offsetToCheck;\n    }\n  }, {\n    key: 'isCollapsed',\n    value: function isCollapsed() {\n      return this.getAnchorKey() === this.getFocusKey() && this.getAnchorOffset() === this.getFocusOffset();\n    }\n  }, {\n    key: 'getStartKey',\n    value: function getStartKey() {\n      return this.getIsBackward() ? this.getFocusKey() : this.getAnchorKey();\n    }\n  }, {\n    key: 'getStartOffset',\n    value: function getStartOffset() {\n      return this.getIsBackward() ? this.getFocusOffset() : this.getAnchorOffset();\n    }\n  }, {\n    key: 'getEndKey',\n    value: function getEndKey() {\n      return this.getIsBackward() ? this.getAnchorKey() : this.getFocusKey();\n    }\n  }, {\n    key: 'getEndOffset',\n    value: function getEndOffset() {\n      return this.getIsBackward() ? this.getAnchorOffset() : this.getFocusOffset();\n    }\n  }], [{\n    key: 'createEmpty',\n    value: function createEmpty(key) {\n      return new SelectionState({\n        anchorKey: key,\n        anchorOffset: 0,\n        focusKey: key,\n        focusOffset: 0,\n        isBackward: false,\n        hasFocus: false\n      });\n    }\n  }]);\n\n  return SelectionState;\n})(SelectionStateRecord);\n\nmodule.exports = SelectionState;"]}