{"version":3,"sources":["../../../src/components/draft/DraftEditorTextNode.react.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_get","get","_x","_x2","_x3","_again","_function","object","property","receiver","Function","desc","undefined","parent","value","getter","call","_classCallCheck","instance","TypeError","_inherits","subClass","superClass","constructor","__proto__","React","require","ReactDOM","UserAgent","useNewlineChar","isBrowser","isNewline","node","textContent","tagName","NEWLINE_A","createElement","NEWLINE_B","DraftEditorTextNode","_React$Component","_forceFlag","shouldComponentUpdate","nextProps","findDOMNode","shouldBeNewline","children","componentWillUpdate","render","Component","module","exports"],"mappings":"AAAA;;;;;;;;;;;;;AAaA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAIA,eAAgB,YAAY;AAAE,WAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,MAAME,MAA1B,EAAkCD,GAAlC,EAAuC;AAAE,UAAIE,aAAaH,MAAMC,CAAN,CAAjB,CAA2BE,WAAWC,UAAX,GAAwBD,WAAWC,UAAX,IAAyB,KAAjD,CAAwDD,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAWG,QAAX,GAAsB,IAAtB,CAA4B,8BAAsBP,MAAtB,EAA8BI,WAAWI,GAAzC,EAA8CJ,UAA9C;AAA4D;AAAE,GAAC,OAAO,UAAUK,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,QAAID,UAAJ,EAAgBX,iBAAiBU,YAAYG,SAA7B,EAAwCF,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBZ,iBAAiBU,WAAjB,EAA8BE,WAA9B,EAA4C,OAAOF,WAAP;AAAqB,GAAhN;AAAmN,CAA/hB,EAAnB;;AAEA,IAAII,OAAO,SAASC,GAAT,CAAaC,EAAb,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AAAE,MAAIC,SAAS,IAAb,CAAmBC,WAAW,OAAOD,MAAP,EAAe;AAAE,QAAIE,SAASL,EAAb;AAAA,QAAiBM,WAAWL,GAA5B;AAAA,QAAiCM,WAAWL,GAA5C,CAAiDC,SAAS,KAAT,CAAgB,IAAIE,WAAW,IAAf,EAAqBA,SAASG,SAASX,SAAlB,CAA6B,IAAIY,OAAO,wCAAgCJ,MAAhC,EAAwCC,QAAxC,CAAX,CAA8D,IAAIG,SAASC,SAAb,EAAwB;AAAE,UAAIC,SAAS,8BAAsBN,MAAtB,CAAb,CAA4C,IAAIM,WAAW,IAAf,EAAqB;AAAE,eAAOD,SAAP;AAAmB,OAA1C,MAAgD;AAAEV,aAAKW,MAAL,CAAaV,MAAMK,QAAN,CAAgBJ,MAAMK,QAAN,CAAgBJ,SAAS,IAAT,CAAeM,OAAOE,SAASD,SAAhB,CAA2B,SAASN,SAAT;AAAqB;AAAE,KAAtO,MAA4O,IAAI,WAAWK,IAAf,EAAqB;AAAE,aAAOA,KAAKG,KAAZ;AAAoB,KAA3C,MAAiD;AAAE,UAAIC,SAASJ,KAAKV,GAAlB,CAAuB,IAAIc,WAAWH,SAAf,EAA0B;AAAE,eAAOA,SAAP;AAAmB,OAAC,OAAOG,OAAOC,IAAP,CAAYP,QAAZ,CAAP;AAA+B;AAAE;AAAE,CAAjpB;;AAEA,SAASQ,eAAT,CAAyBC,QAAzB,EAAmCtB,WAAnC,EAAgD;AAAE,MAAI,EAAEsB,oBAAoBtB,WAAtB,CAAJ,EAAwC;AAAE,UAAM,IAAIuB,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,SAASC,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,UAAM,IAAIH,SAAJ,CAAc,qEAAoEG,UAApE,uDAAoEA,UAApE,EAAd,CAAN;AAAsG,GAACD,SAAStB,SAAT,GAAqB,sBAAcuB,cAAcA,WAAWvB,SAAvC,EAAkD,EAAEwB,aAAa,EAAET,OAAOO,QAAT,EAAmB7B,YAAY,KAA/B,EAAsCE,UAAU,IAAhD,EAAsDD,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAI6B,UAAJ,EAAgB,2BAAwB,8BAAsBD,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASG,SAAT,GAAqBF,UAA3F;AAAwG;;AAE9e,IAAIG,QAAQC,QAAQ,OAAR,CAAZ;AACA,IAAIC,WAAWD,QAAQ,WAAR,CAAf;AACA,IAAIE,YAAYF,QAAQ,oBAAR,CAAhB;;AAEA;AACA;AACA,IAAIG,iBAAiBD,UAAUE,SAAV,CAAoB,UAApB,CAArB;;AAEA;;;AAGA,SAASC,SAAT,CAAmBC,IAAnB,EAAyB;AACvB,SAAOH,iBAAiBG,KAAKC,WAAL,KAAqB,IAAtC,GAA6CD,KAAKE,OAAL,KAAiB,IAArE;AACD;;AAED;;;;;;;;;;;AAWA,IAAIC,YAAYN,iBAAiBJ,MAAMW,aAAN,CAC/B,MAD+B,EAE/B,EAAEzC,KAAK,GAAP,EAAY,aAAa,MAAzB,EAF+B,EAG/B,IAH+B,CAAjB,GAIZ8B,MAAMW,aAAN,CAAoB,IAApB,EAA0B,EAAEzC,KAAK,GAAP,EAAY,aAAa,MAAzB,EAA1B,CAJJ;;AAMA,IAAI0C,YAAYR,iBAAiBJ,MAAMW,aAAN,CAC/B,MAD+B,EAE/B,EAAEzC,KAAK,GAAP,EAAY,aAAa,MAAzB,EAF+B,EAG/B,IAH+B,CAAjB,GAIZ8B,MAAMW,aAAN,CAAoB,IAApB,EAA0B,EAAEzC,KAAK,GAAP,EAAY,aAAa,MAAzB,EAA1B,CAJJ;;AAMA;;;;;;;;AAQA,IAAI2C,sBAAuB,UAAUC,gBAAV,EAA4B;AACrDnB,YAAUkB,mBAAV,EAA+BC,gBAA/B;;AAEA,WAASD,mBAAT,CAA6BlD,KAA7B,EAAoC;AAClC6B,oBAAgB,IAAhB,EAAsBqB,mBAAtB;;AAEAtC,SAAK,8BAAsBsC,oBAAoBvC,SAA1C,CAAL,EAA2D,aAA3D,EAA0E,IAA1E,EAAgFiB,IAAhF,CAAqF,IAArF,EAA2F5B,KAA3F;AACA,SAAKoD,UAAL,GAAkB,KAAlB;AACD;;AAEDvD,eAAaqD,mBAAb,EAAkC,CAAC;AACjC3C,SAAK,uBAD4B;AAEjCmB,WAAO,SAAS2B,qBAAT,CAA+BC,SAA/B,EAA0C;AAC/C,UAAIV,OAAOL,SAASgB,WAAT,CAAqB,IAArB,CAAX;AACA,UAAIC,kBAAkBF,UAAUG,QAAV,KAAuB,EAA7C;AACA,UAAID,eAAJ,EAAqB;AACnB,eAAO,CAACb,UAAUC,IAAV,CAAR;AACD;AACD,aAAOA,KAAKC,WAAL,KAAqBS,UAAUG,QAAtC;AACD;AATgC,GAAD,EAU/B;AACDlD,SAAK,qBADJ;AAEDmB,WAAO,SAASgC,mBAAT,GAA+B;AACpC;AACA;AACA,WAAKN,UAAL,GAAkB,CAAC,KAAKA,UAAxB;AACD;AANA,GAV+B,EAiB/B;AACD7C,SAAK,QADJ;AAEDmB,WAAO,SAASiC,MAAT,GAAkB;AACvB,UAAI,KAAK3D,KAAL,CAAWyD,QAAX,KAAwB,EAA5B,EAAgC;AAC9B,eAAO,KAAKL,UAAL,GAAkBL,SAAlB,GAA8BE,SAArC;AACD;AACD,aAAOZ,MAAMW,aAAN,CACL,MADK,EAEL,EAAEzC,KAAK,KAAK6C,UAAL,GAAkB,GAAlB,GAAwB,GAA/B,EAAoC,aAAa,MAAjD,EAFK,EAGL,KAAKpD,KAAL,CAAWyD,QAHN,CAAP;AAKD;AAXA,GAjB+B,CAAlC;;AA+BA,SAAOP,mBAAP;AACD,CA1CyB,CA0CvBb,MAAMuB,SA1CiB,CAA1B;;AA4CAC,OAAOC,OAAP,GAAiBZ,mBAAjB","file":"DraftEditorTextNode.react.js","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule DraftEditorTextNode.react\n * @typechecks\n * \n */\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar React = require('react');\nvar ReactDOM = require('react-dom');\nvar UserAgent = require('fbjs/lib/UserAgent');\n\n// In IE, spans with <br> tags render as two newlines. By rendering a span\n// with only a newline character, we can be sure to render a single line.\nvar useNewlineChar = UserAgent.isBrowser('IE <= 11');\n\n/**\n * Check whether the node should be considered a newline.\n */\nfunction isNewline(node) {\n  return useNewlineChar ? node.textContent === '\\n' : node.tagName === 'BR';\n}\n\n/**\n * Placeholder elements for empty text content.\n *\n * What is this `data-text` attribute, anyway? It turns out that we need to\n * put an attribute on the lowest-level text node in order to preserve correct\n * spellcheck handling. If the <span> is naked, Chrome and Safari may do\n * bizarre things to do the DOM -- split text nodes, create extra spans, etc.\n * If the <span> has an attribute, this appears not to happen.\n * See http://jsfiddle.net/9khdavod/ for the failure case, and\n * http://jsfiddle.net/7pg143f7/ for the fixed case.\n */\nvar NEWLINE_A = useNewlineChar ? React.createElement(\n  'span',\n  { key: 'A', 'data-text': 'true' },\n  '\\n'\n) : React.createElement('br', { key: 'A', 'data-text': 'true' });\n\nvar NEWLINE_B = useNewlineChar ? React.createElement(\n  'span',\n  { key: 'B', 'data-text': 'true' },\n  '\\n'\n) : React.createElement('br', { key: 'B', 'data-text': 'true' });\n\n/**\n * The lowest-level component in a `DraftEditor`, the text node component\n * replaces the default React text node implementation. This allows us to\n * perform custom handling of newline behavior and avoid re-rendering text\n * nodes with DOM state that already matches the expectations of our immutable\n * editor state.\n */\n\nvar DraftEditorTextNode = (function (_React$Component) {\n  _inherits(DraftEditorTextNode, _React$Component);\n\n  function DraftEditorTextNode(props) {\n    _classCallCheck(this, DraftEditorTextNode);\n\n    _get(Object.getPrototypeOf(DraftEditorTextNode.prototype), 'constructor', this).call(this, props);\n    this._forceFlag = false;\n  }\n\n  _createClass(DraftEditorTextNode, [{\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate(nextProps) {\n      var node = ReactDOM.findDOMNode(this);\n      var shouldBeNewline = nextProps.children === '';\n      if (shouldBeNewline) {\n        return !isNewline(node);\n      }\n      return node.textContent !== nextProps.children;\n    }\n  }, {\n    key: 'componentWillUpdate',\n    value: function componentWillUpdate() {\n      // By flipping this flag, we also keep flipping keys which forces\n      // React to remount this node every time it rerenders.\n      this._forceFlag = !this._forceFlag;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (this.props.children === '') {\n        return this._forceFlag ? NEWLINE_A : NEWLINE_B;\n      }\n      return React.createElement(\n        'span',\n        { key: this._forceFlag ? 'A' : 'B', 'data-text': 'true' },\n        this.props.children\n      );\n    }\n  }]);\n\n  return DraftEditorTextNode;\n})(React.Component);\n\nmodule.exports = DraftEditorTextNode;"]}