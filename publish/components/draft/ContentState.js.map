{"version":3,"sources":["../../../src/components/draft/ContentState.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_get","get","_x2","_x3","_x4","_again","_function","object","property","receiver","Function","desc","undefined","parent","value","getter","call","_classCallCheck","instance","TypeError","_inherits","subClass","superClass","constructor","__proto__","BlockMapBuilder","require","CharacterMetadata","ContentBlock","Immutable","SelectionState","generateRandomKey","sanitizeDraftText","List","Record","Repeat","defaultRecord","blockMap","selectionBefore","selectionAfter","ContentStateRecord","ContentState","_ContentStateRecord","apply","arguments","getBlockMap","getSelectionBefore","getSelectionAfter","getBlockForKey","block","getKeyBefore","reverse","keySeq","skipUntil","v","skip","first","getKeyAfter","getBlockAfter","_","k","getBlockBefore","getBlocksAsArray","toArray","getFirstBlock","getLastBlock","last","getPlainText","delimiter","map","getText","join","hasText","size","getLength","createFromBlockArray","blocks","createFromArray","selectionState","createEmpty","getKey","createFromText","text","strings","split","type","characterList","EMPTY","module","exports"],"mappings":"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","file":"ContentState.js","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ContentState\n * @typechecks\n * \n */\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar BlockMapBuilder = require('./BlockMapBuilder');\nvar CharacterMetadata = require('./CharacterMetadata');\nvar ContentBlock = require('./ContentBlock');\nvar Immutable = require('immutable');\nvar SelectionState = require('./SelectionState');\n\nvar generateRandomKey = require('./generateRandomKey');\nvar sanitizeDraftText = require('./sanitizeDraftText');\n\nvar List = Immutable.List;\nvar Record = Immutable.Record;\nvar Repeat = Immutable.Repeat;\n\nvar defaultRecord = {\n  blockMap: null,\n  selectionBefore: null,\n  selectionAfter: null\n};\n\nvar ContentStateRecord = Record(defaultRecord);\n\nvar ContentState = (function (_ContentStateRecord) {\n  _inherits(ContentState, _ContentStateRecord);\n\n  function ContentState() {\n    _classCallCheck(this, ContentState);\n\n    _get(Object.getPrototypeOf(ContentState.prototype), 'constructor', this).apply(this, arguments);\n  }\n\n  _createClass(ContentState, [{\n    key: 'getBlockMap',\n    value: function getBlockMap() {\n      return this.get('blockMap');\n    }\n  }, {\n    key: 'getSelectionBefore',\n    value: function getSelectionBefore() {\n      return this.get('selectionBefore');\n    }\n  }, {\n    key: 'getSelectionAfter',\n    value: function getSelectionAfter() {\n      return this.get('selectionAfter');\n    }\n  }, {\n    key: 'getBlockForKey',\n    value: function getBlockForKey(key) {\n      var block = this.getBlockMap().get(key);\n      return block;\n    }\n  }, {\n    key: 'getKeyBefore',\n    value: function getKeyBefore(key) {\n      return this.getBlockMap().reverse().keySeq().skipUntil(function (v) {\n        return v === key;\n      }).skip(1).first();\n    }\n  }, {\n    key: 'getKeyAfter',\n    value: function getKeyAfter(key) {\n      return this.getBlockMap().keySeq().skipUntil(function (v) {\n        return v === key;\n      }).skip(1).first();\n    }\n  }, {\n    key: 'getBlockAfter',\n    value: function getBlockAfter(key) {\n      return this.getBlockMap().skipUntil(function (_, k) {\n        return k === key;\n      }).skip(1).first();\n    }\n  }, {\n    key: 'getBlockBefore',\n    value: function getBlockBefore(key) {\n      return this.getBlockMap().reverse().skipUntil(function (_, k) {\n        return k === key;\n      }).skip(1).first();\n    }\n  }, {\n    key: 'getBlocksAsArray',\n    value: function getBlocksAsArray() {\n      return this.getBlockMap().toArray();\n    }\n  }, {\n    key: 'getFirstBlock',\n    value: function getFirstBlock() {\n      return this.getBlockMap().first();\n    }\n  }, {\n    key: 'getLastBlock',\n    value: function getLastBlock() {\n      return this.getBlockMap().last();\n    }\n  }, {\n    key: 'getPlainText',\n    value: function getPlainText(delimiter) {\n      return this.getBlockMap().map(function (block) {\n        return block ? block.getText() : '';\n      }).join(delimiter || '\\n');\n    }\n  }, {\n    key: 'hasText',\n    value: function hasText() {\n      var blockMap = this.getBlockMap();\n      return blockMap.size > 1 || blockMap.first().getLength() > 0;\n    }\n  }], [{\n    key: 'createFromBlockArray',\n    value: function createFromBlockArray(blocks) {\n      var blockMap = BlockMapBuilder.createFromArray(blocks);\n      var selectionState = SelectionState.createEmpty(blockMap.first().getKey());\n      return new ContentState({\n        blockMap: blockMap,\n        selectionBefore: selectionState,\n        selectionAfter: selectionState\n      });\n    }\n  }, {\n    key: 'createFromText',\n    value: function createFromText(text) {\n      var delimiter = arguments.length <= 1 || arguments[1] === undefined ? /\\r\\n?|\\n/g : arguments[1];\n\n      var strings = text.split(delimiter);\n      var blocks = strings.map(function (block) {\n        block = sanitizeDraftText(block);\n        return new ContentBlock({\n          key: generateRandomKey(),\n          text: block,\n          type: 'unstyled',\n          characterList: List(Repeat(CharacterMetadata.EMPTY, block.length))\n        });\n      });\n      return ContentState.createFromBlockArray(blocks);\n    }\n  }]);\n\n  return ContentState;\n})(ContentStateRecord);\n\nmodule.exports = ContentState;"]}