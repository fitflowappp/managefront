{"version":3,"sources":["../../../src/components/draft/getVisibleSelectionRect.js"],"names":["getRangeBoundingClientRect","require","getVisibleSelectionRect","global","selection","getSelection","rangeCount","range","getRangeAt","boundingRect","top","right","bottom","left","module","exports"],"mappings":"AAAA;;;;;;;;;;;;;AAaA;;;;;AAKA;;AAEA,IAAIA,6BAA6BC,QAAQ,8BAAR,CAAjC;;AAEA,SAASC,uBAAT,CAAiCC,MAAjC,EAAyC;AACvC,MAAIC,YAAYD,OAAOE,YAAP,EAAhB;AACA,MAAI,CAACD,UAAUE,UAAf,EAA2B;AACzB,WAAO,IAAP;AACD;;AAED,MAAIC,QAAQH,UAAUI,UAAV,CAAqB,CAArB,CAAZ;AACA,MAAIC,eAAeT,2BAA2BO,KAA3B,CAAnB;AACA,MAAIG,MAAMD,aAAaC,GAAvB;AACA,MAAIC,QAAQF,aAAaE,KAAzB;AACA,MAAIC,SAASH,aAAaG,MAA1B;AACA,MAAIC,OAAOJ,aAAaI,IAAxB;;AAEA;AACA;AACA;AACA,MAAIH,QAAQ,CAAR,IAAaC,UAAU,CAAvB,IAA4BC,WAAW,CAAvC,IAA4CC,SAAS,CAAzD,EAA4D;AAC1D,WAAO,IAAP;AACD;;AAED,SAAOJ,YAAP;AACD;;AAEDK,OAAOC,OAAP,GAAiBb,uBAAjB","file":"getVisibleSelectionRect.js","sourcesContent":["/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule getVisibleSelectionRect\n * @typechecks\n * \n */\n\n/**\n * Return the bounding ClientRect for the visible DOM selection, if any.\n * In cases where there are no selected ranges or the bounding rect is\n * temporarily invalid, return null.\n */\n'use strict';\n\nvar getRangeBoundingClientRect = require('./getRangeBoundingClientRect');\n\nfunction getVisibleSelectionRect(global) {\n  var selection = global.getSelection();\n  if (!selection.rangeCount) {\n    return null;\n  }\n\n  var range = selection.getRangeAt(0);\n  var boundingRect = getRangeBoundingClientRect(range);\n  var top = boundingRect.top;\n  var right = boundingRect.right;\n  var bottom = boundingRect.bottom;\n  var left = boundingRect.left;\n\n  // When a re-render leads to a node being removed, the DOM selection will\n  // temporarily be placed on an ancestor node, which leads to an invalid\n  // bounding rect. Discard this state.\n  if (top === 0 && right === 0 && bottom === 0 && left === 0) {\n    return null;\n  }\n\n  return boundingRect;\n}\n\nmodule.exports = getVisibleSelectionRect;"]}