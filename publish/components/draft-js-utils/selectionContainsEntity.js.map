{"version":3,"sources":["../../../src/components/draft-js-utils/selectionContainsEntity.js"],"names":["Object","defineProperty","exports","value","_getSelectedBlocks","require","_getSelectedBlocks2","_interopRequireDefault","obj","__esModule","default","strategy","editorState","selection","contentState","getCurrentContent","currentSelection","getSelection","startKey","getStartKey","endKey","getEndKey","startOffset","getStartOffset","endOffset","getEndOffset","isSameBlock","selectedBlocks","entityFound","finalStartOffset","finalEndOffset","forEach","block","start","end","blockKey","getKey"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,SAAO;AADoC,CAA7C;;AAIA,IAAIC,qBAAqBC,QAAQ,qBAAR,CAAzB;;AAEA,IAAIC,sBAAsBC,uBAAuBH,kBAAvB,CAA1B;;AAEA,SAASG,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIC,UAAX,GAAwBD,GAAxB,GAA8B,EAAEE,SAASF,GAAX,EAArC;AAAwD;;AAE/FN,QAAQQ,OAAR,GAAkB,UAAUC,QAAV,EAAoB;AACpC,SAAO,UAAUC,WAAV,EAAuBC,SAAvB,EAAkC;AACvC,QAAIC,eAAeF,YAAYG,iBAAZ,EAAnB;AACA,QAAIC,mBAAmBH,aAAaD,YAAYK,YAAZ,EAApC;AACA,QAAIC,WAAWF,iBAAiBG,WAAjB,EAAf;AACA,QAAIC,SAASJ,iBAAiBK,SAAjB,EAAb;AACA,QAAIC,cAAcN,iBAAiBO,cAAjB,EAAlB;AACA,QAAIC,YAAYR,iBAAiBS,YAAjB,EAAhB;;AAEA,QAAIC,cAAcR,aAAaE,MAA/B;AACA,QAAIO,iBAAiB,CAAC,GAAGrB,oBAAoBI,OAAxB,EAAiCI,YAAjC,EAA+CI,QAA/C,EAAyDE,MAAzD,CAArB;AACA,QAAIQ,cAAc,KAAlB;;AAEA;AACA;AACA,QAAIC,mBAAmBP,cAAc,CAArC;AACA,QAAIQ,iBAAiBN,YAAY,CAAjC;;AAEAG,mBAAeI,OAAf,CAAuB,UAAUC,KAAV,EAAiB;AACtCrB,eAASqB,KAAT,EAAgB,UAAUC,KAAV,EAAiBC,GAAjB,EAAsB;AACpC,YAAIN,WAAJ,EAAiB;AACf;AACD;;AAED,YAAIO,WAAWH,MAAMI,MAAN,EAAf;;AAEA,YAAIV,gBAAgBQ,MAAML,gBAAN,IAA0BI,QAAQH,cAAlD,CAAJ,EAAuE;AACrE;AACD,SAFD,MAEO,IAAIK,aAAajB,QAAb,IAAyBgB,MAAML,gBAAnC,EAAqD;AAC1D;AACD,SAFM,MAEA,IAAIM,aAAaf,MAAb,IAAuBa,QAAQH,cAAnC,EAAmD;AACxD;AACD;;AAEDF,sBAAc,IAAd;AACD,OAhBD;AAiBD,KAlBD;;AAoBA,WAAOA,WAAP;AACD,GAtCD;AAuCD,CAxCD","file":"selectionContainsEntity.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getSelectedBlocks = require('./getSelectedBlocks');\n\nvar _getSelectedBlocks2 = _interopRequireDefault(_getSelectedBlocks);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (strategy) {\n  return function (editorState, selection) {\n    var contentState = editorState.getCurrentContent();\n    var currentSelection = selection || editorState.getSelection();\n    var startKey = currentSelection.getStartKey();\n    var endKey = currentSelection.getEndKey();\n    var startOffset = currentSelection.getStartOffset();\n    var endOffset = currentSelection.getEndOffset();\n\n    var isSameBlock = startKey === endKey;\n    var selectedBlocks = (0, _getSelectedBlocks2.default)(contentState, startKey, endKey);\n    var entityFound = false;\n\n    // We have to shift the offset to not get false positives when selecting\n    // a character just before or after an entity\n    var finalStartOffset = startOffset + 1;\n    var finalEndOffset = endOffset - 1;\n\n    selectedBlocks.forEach(function (block) {\n      strategy(block, function (start, end) {\n        if (entityFound) {\n          return;\n        }\n\n        var blockKey = block.getKey();\n\n        if (isSameBlock && (end < finalStartOffset || start > finalEndOffset)) {\n          return;\n        } else if (blockKey === startKey && end < finalStartOffset) {\n          return;\n        } else if (blockKey === endKey && start > finalEndOffset) {\n          return;\n        }\n\n        entityFound = true;\n      });\n    });\n\n    return entityFound;\n  };\n};"]}