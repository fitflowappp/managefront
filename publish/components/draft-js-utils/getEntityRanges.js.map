{"version":3,"sources":["../../../src/components/draft-js-utils/getEntityRanges.js"],"names":["Object","defineProperty","exports","value","EMPTY_SET","undefined","default","getEntityRanges","_immutable","require","OrderedSet","text","charMetaList","charEntity","prevCharEntity","ranges","rangeStart","i","len","length","meta","get","getEntity","push","getStyleRanges","slice","charStyle","prevCharStyle","getStyle","is"],"mappings":"AAAA;;AAEAA,OAAOC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,SAAO;AADoC,CAA7C;AAGAD,QAAQE,SAAR,GAAoBC,SAApB;AACAH,QAAQI,OAAR,GAAkBC,eAAlB;;AAEA,IAAIC,aAAaC,QAAQ,WAAR,CAAjB;;AAEA,IAAIL,YAAYF,QAAQE,SAAR,GAAoB,IAAII,WAAWE,UAAf,EAApC;;AAEA,SAASH,eAAT,CAAyBI,IAAzB,EAA+BC,YAA/B,EAA6C;AAC3C,MAAIC,aAAa,IAAjB;AACA,MAAIC,iBAAiB,IAArB;AACA,MAAIC,SAAS,EAAb;AACA,MAAIC,aAAa,CAAjB;AACA,OAAK,IAAIC,IAAI,CAAR,EAAWC,MAAMP,KAAKQ,MAA3B,EAAmCF,IAAIC,GAAvC,EAA4CD,GAA5C,EAAiD;AAC/CH,qBAAiBD,UAAjB;AACA,QAAIO,OAAOR,aAAaS,GAAb,CAAiBJ,CAAjB,CAAX;AACAJ,iBAAaO,OAAOA,KAAKE,SAAL,EAAP,GAA0B,IAAvC;AACA,QAAIL,IAAI,CAAJ,IAASJ,eAAeC,cAA5B,EAA4C;AAC1CC,aAAOQ,IAAP,CAAY,CAACT,cAAD,EAAiBU,eAAeb,KAAKc,KAAL,CAAWT,UAAX,EAAuBC,CAAvB,CAAf,EAA0CL,aAAaa,KAAb,CAAmBT,UAAnB,EAA+BC,CAA/B,CAA1C,CAAjB,CAAZ;AACAD,mBAAaC,CAAb;AACD;AACF;AACDF,SAAOQ,IAAP,CAAY,CAACV,UAAD,EAAaW,eAAeb,KAAKc,KAAL,CAAWT,UAAX,CAAf,EAAuCJ,aAAaa,KAAb,CAAmBT,UAAnB,CAAvC,CAAb,CAAZ;AACA,SAAOD,MAAP;AACD;;AAED,SAASS,cAAT,CAAwBb,IAAxB,EAA8BC,YAA9B,EAA4C;AAC1C,MAAIc,YAAYtB,SAAhB;AACA,MAAIuB,gBAAgBvB,SAApB;AACA,MAAIW,SAAS,EAAb;AACA,MAAIC,aAAa,CAAjB;AACA,OAAK,IAAIC,IAAI,CAAR,EAAWC,MAAMP,KAAKQ,MAA3B,EAAmCF,IAAIC,GAAvC,EAA4CD,GAA5C,EAAiD;AAC/CU,oBAAgBD,SAAhB;AACA,QAAIN,OAAOR,aAAaS,GAAb,CAAiBJ,CAAjB,CAAX;AACAS,gBAAYN,OAAOA,KAAKQ,QAAL,EAAP,GAAyBxB,SAArC;AACA,QAAIa,IAAI,CAAJ,IAAS,CAAC,CAAC,GAAGT,WAAWqB,EAAf,EAAmBH,SAAnB,EAA8BC,aAA9B,CAAd,EAA4D;AAC1DZ,aAAOQ,IAAP,CAAY,CAACZ,KAAKc,KAAL,CAAWT,UAAX,EAAuBC,CAAvB,CAAD,EAA4BU,aAA5B,CAAZ;AACAX,mBAAaC,CAAb;AACD;AACF;AACDF,SAAOQ,IAAP,CAAY,CAACZ,KAAKc,KAAL,CAAWT,UAAX,CAAD,EAAyBU,SAAzB,CAAZ;AACA,SAAOX,MAAP;AACD","file":"getEntityRanges.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EMPTY_SET = undefined;\nexports.default = getEntityRanges;\n\nvar _immutable = require('immutable');\n\nvar EMPTY_SET = exports.EMPTY_SET = new _immutable.OrderedSet();\n\nfunction getEntityRanges(text, charMetaList) {\n  var charEntity = null;\n  var prevCharEntity = null;\n  var ranges = [];\n  var rangeStart = 0;\n  for (var i = 0, len = text.length; i < len; i++) {\n    prevCharEntity = charEntity;\n    var meta = charMetaList.get(i);\n    charEntity = meta ? meta.getEntity() : null;\n    if (i > 0 && charEntity !== prevCharEntity) {\n      ranges.push([prevCharEntity, getStyleRanges(text.slice(rangeStart, i), charMetaList.slice(rangeStart, i))]);\n      rangeStart = i;\n    }\n  }\n  ranges.push([charEntity, getStyleRanges(text.slice(rangeStart), charMetaList.slice(rangeStart))]);\n  return ranges;\n}\n\nfunction getStyleRanges(text, charMetaList) {\n  var charStyle = EMPTY_SET;\n  var prevCharStyle = EMPTY_SET;\n  var ranges = [];\n  var rangeStart = 0;\n  for (var i = 0, len = text.length; i < len; i++) {\n    prevCharStyle = charStyle;\n    var meta = charMetaList.get(i);\n    charStyle = meta ? meta.getStyle() : EMPTY_SET;\n    if (i > 0 && !(0, _immutable.is)(charStyle, prevCharStyle)) {\n      ranges.push([text.slice(rangeStart, i), prevCharStyle]);\n      rangeStart = i;\n    }\n  }\n  ranges.push([text.slice(rangeStart), charStyle]);\n  return ranges;\n}"]}