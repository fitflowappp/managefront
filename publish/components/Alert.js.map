{"version":3,"sources":["../../src/components/Alert.js"],"names":["Alert","createRootEle","root","document","getElementById","createElement","id","body","appendChild","info","props","p","rele","type","closeTime","open","alert","confirm","close","content","sure","parent","findDOMNode","parentNode","unmountComponentAtNode","removeChild","setTimeout","destroy","bind","element","render","componentDidMount","componentDidUpdate","componentWillUnmount","InfoModal","state","show","setState","propTypes","PropTypes","oneOfType","string","number","isRequired","AlertModal","cb","title","func","ConfirmModal","cancelcb","surecb"],"mappings":"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","file":"Alert.js","sourcesContent":["/**\r\n * Created by bruce on 16-6-14.\r\n */\r\nimport React, {Component, PropTypes} from 'react';\r\nimport ReactDOM, {render, findDOMNode} from 'react-dom'\r\nimport {Modal, Button} from \"react-bootstrap\"\r\nexport default class Alert extends Component {\r\n\r\n    static createRootEle() {\r\n        var root = document.getElementById(\"reactAlert\");\r\n        if (!root) {\r\n            root = document.createElement('div');\r\n            root.id = \"reactAlert\";\r\n            document.body.appendChild(root);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * 消息\r\n     * Alert.info({info:123});\r\n     * Alert.info({info:123,closeTime:3000});\r\n     * @param props\r\n     */\r\n    static info(props) {\r\n        Alert.createRootEle();\r\n        var p = document.createElement('div');\r\n        document.getElementById(\"reactAlert\").appendChild(p);\r\n        var rele = render(React.createElement(Alert, {type: \"info\", ...props}), p);\r\n        if (props.closeTime) {\r\n            rele.open(props.closeTime)\r\n        } else {\r\n            rele.open(1000)\r\n        }\r\n        return rele;\r\n    }\r\n\r\n    /**\r\n     * alert\r\n     *\r\n     * Alert.alert({title:300,body:\"hahah\" ,cb:function(){\r\n     *  do something\r\n     * }})\r\n     * @param props\r\n     */\r\n    static alert(props) {\r\n        Alert.createRootEle();\r\n        var p = document.createElement('div');\r\n        document.getElementById(\"reactAlert\").appendChild(p);\r\n        var rele = render(React.createElement(Alert, {type: \"alert\", ...props}), p);\r\n        rele.open();\r\n        return rele;\r\n    }\r\n\r\n    /**\r\n     * confirm\r\n     *\r\n     * Alert.confirm({title:300,body:\"hahah\" ,surecb:function(){\r\n     *  do something\r\n     * },cancelcb:function(){\r\n     *  do something\r\n     * }})\r\n     * @param props\r\n     */\r\n    static confirm(props) {\r\n        Alert.createRootEle();\r\n        var p = document.createElement('div');\r\n        document.getElementById(\"reactAlert\").appendChild(p);\r\n        var rele = render(React.createElement(Alert, {type: \"confirm\", ...props}), p);\r\n        rele.open();\r\n        return rele;\r\n    }\r\n\r\n    close() {\r\n        this.content.close();\r\n    }\r\n\r\n    sure() {\r\n        this.content.sure();\r\n        var parent = ReactDOM.findDOMNode(this).parentNode;\r\n        ReactDOM.unmountComponentAtNode(parent);\r\n        document.getElementById(\"reactAlert\").removeChild(parent);\r\n    }\r\n\r\n    open(closeTime) {\r\n        this.content.open();\r\n        if (closeTime) {\r\n            setTimeout(function () {\r\n                this.destroy();\r\n            }.bind(this), closeTime)\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.close();\r\n        var parent = ReactDOM.findDOMNode(this).parentNode;\r\n        ReactDOM.unmountComponentAtNode(parent);\r\n        document.getElementById(\"reactAlert\").removeChild(parent);\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.element = null;\r\n    }\r\n\r\n    render() {\r\n        return <div></div>;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.element = ReactDOM.findDOMNode(this);\r\n        this.componentDidUpdate();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        var parent = ReactDOM.findDOMNode(this.content).parentNode;\r\n        ReactDOM.unmountComponentAtNode(parent);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        const {type} = this.props;\r\n        var content;\r\n        switch (type) {\r\n            case \"info\":\r\n                content = <InfoModal {...this.props}/>\r\n                break;\r\n            case \"alert\":\r\n                content = <AlertModal close={this.destroy.bind(this)} {...this.props}/>\r\n                break;\r\n            case \"confirm\":\r\n                content = <ConfirmModal close={this.destroy.bind(this)} sure={this.sure.bind(this)} {...this.props}/>\r\n                break;\r\n            case \"prompt\":\r\n                content = <PromptModal close={this.destroy.bind(this)} sure={this.sure.bind(this)} {...this.props}/>\r\n                break;\r\n\r\n        }\r\n        this.content = render(content, this.element)\r\n    }\r\n}\r\n\r\n\r\nclass InfoModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state =\r\n        {\r\n            show: false\r\n        }\r\n    }\r\n\r\n    open() { //打开模态框\r\n        this.setState({\r\n            show: true\r\n        })\r\n    }\r\n\r\n    close() { //关闭模态框\r\n        this.setState({\r\n            show: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"static-modal\">\r\n                <Modal show={this.state.show} onHide={this.close.bind(this)} bsSize=\"small\">\r\n                    <Modal.Body className=\"text-center\">\r\n                        {this.props.info}\r\n                    </Modal.Body>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nInfoModal.propTypes = {\r\n    info: React.PropTypes.oneOfType([        // any\r\n        React.PropTypes.string,\r\n        React.PropTypes.number]).isRequired\r\n};\r\n\r\nclass AlertModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state =\r\n        {\r\n            show: false\r\n        }\r\n    }\r\n\r\n    open() { //打开模态框\r\n        this.setState({\r\n            show: true\r\n        })\r\n    }\r\n\r\n    close() { //关闭模态框\r\n        this.props.cb && this.props.cb();\r\n        this.setState({\r\n            show: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"static-modal\">\r\n                <Modal show={this.state.show} backdrop={false}>\r\n                    <Modal.Header>\r\n                        <Modal.Title>\r\n                            {this.props.title}\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n\r\n                    <Modal.Body>\r\n                        {this.props.body}\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button autoFocus bsStyle=\"primary\" onClick={this.props.close}>确定</Button>\r\n                    </Modal.Footer>\r\n\r\n                </Modal>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nAlertModal.propTypes = {\r\n    body: React.PropTypes.oneOfType([        // any\r\n        React.PropTypes.string,\r\n        React.PropTypes.number]).isRequired,\r\n    title: React.PropTypes.oneOfType([        // any\r\n        React.PropTypes.string,\r\n        React.PropTypes.number]),\r\n    cb: React.PropTypes.func\r\n};\r\n\r\nclass ConfirmModal extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state =\r\n        {\r\n            show: false\r\n        }\r\n    }\r\n\r\n    open() { //打开模态框\r\n        this.setState({\r\n            show: true\r\n        })\r\n    }\r\n\r\n    close() { //关闭模态框\r\n        this.props.cancelcb && this.props.cancelcb();\r\n        this.setState({\r\n            show: false\r\n        })\r\n    }\r\n\r\n    sure() { //关闭模态框\r\n        this.props.surecb && this.props.surecb();\r\n        this.setState({\r\n            show: false\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"static-modal\">\r\n                <Modal show={this.state.show} backdrop={false} >\r\n                    <Modal.Header>\r\n                        <Modal.Title>\r\n                            {this.props.title}\r\n                        </Modal.Title>\r\n                    </Modal.Header>\r\n\r\n                    <Modal.Body>\r\n                        {this.props.body}\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                        <Button autoFocus bsStyle=\"primary\" onClick={this.props.sure}>确定</Button>\r\n                        <Button onClick={this.props.close}>取消</Button>\r\n                    </Modal.Footer>\r\n\r\n                </Modal>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nConfirmModal.propTypes = {\r\n    body: React.PropTypes.oneOfType([        // any\r\n        React.PropTypes.string,\r\n        React.PropTypes.number]).isRequired,\r\n    title: React.PropTypes.oneOfType([        // any\r\n        React.PropTypes.string,\r\n        React.PropTypes.number]),\r\n    surecb: React.PropTypes.func,\r\n    cancelcb: React.PropTypes.func\r\n};\r\n"]}