{"version":3,"sources":["../../src/components/Editor.js"],"names":["AtomicBlockUtils","Editor","EditorState","Entity","RichUtils","CompositeDecorator","Modifier","Map","MediaEditorExample","props","decorator","strategy","findLinkEntities","component","Link","state","editorState","createEmpty","showURLInput","urlValue","imgAlt","set","focus","refs","editor","onChange","setState","handleKeyCommand","command","_handleKeyCommand","toggleBlockType","type","_toggleBlockType","toggleInlineStyle","style","_toggleInlineStyle","options","inlineStyles","BOLD","element","ITALIC","attributes","class","fontSize","CODE","STRIKETHROUGH","red","color","orange","yellow","green","blue","indigo","violet","yahei","fontFamily","SimSun","SimHei","arial","line1","lineHeight","line2","line3","CENTER","textAlign","display","logState","postEditor","consultantId","selectNoTag","selectTag","contentType","title","img","remark","userId","content","getCurrentContent","stateStr","allTag","concat","html","id","role","info","params","coverImage","categoryId","tags","length","confirm","body","surecb","that","then","obj","data","code","msg","bind","confirmMedia","_confirmMedia","promptForLink","_promptForLink","onURLChange","e","target","value","confirmLink","_confirmLink","onLinkInputKeyDown","_onLinkInputKeyDown","removeLink","_removeLink","toggleColor","toggledColor","_toggleColor","toggleFont","toggledfont","_toggleFont","toggleLine","toggledline","_toggleLine","componentDidMount","newState","blockType","inlineStyle","preventDefault","FormData","file","document","getElementById","i","files","append","config","progress","progressEvent","percentCompleted","loaded","total","post","res","addimg","oldstate","url","entityKey","create","src","alt","insertAtomicBlock","newstate","contentUri","catch","err","console","log","selection","getSelection","nextContentState","colorStyleMap","reduce","contentState","removeInlineStyle","nextEditorState","push","currentStyle","getCurrentInlineStyle","isCollapsed","has","toggledFont","fontStyleMap","font","toggledLine","lineStyleMap","line","setTimeout","toggleLink","which","name","render","className","hasText","getBlockMap","first","getType","urlInput","fileoptions","styles","urlInputContainer","marginBottom","marginRight","styleMap","getBlockStyle","mediaBlockRenderer","block","BLOCK_TYPES","label","BlockStyleControls","getBlockForKey","getStartKey","map","onToggle","INLINE_STYLES","InlineStyleControls","Media","editable","Image","entity","get","getEntityAt","getData","media","contentBlock","callback","findEntityRanges","character","getEntity","link","children","StyleButton","active","Component","StyleButton_color","styleButton","COLORS","ColorControls","controls","StyleButton_font","FONTS","FontControls","StyleButton_line","LINE","LineControls","root","padding","width","buttons","border","cursor","minHeight","button","marginTop","textDecoration","userSelect","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","file":"Editor.js","sourcesContent":["/**\r\n * Created by qwr on 2016/8/5.\r\n */\r\nimport React, {Component, PropTypes} from 'react'\r\nimport Draft from '../components/draft'\r\nimport {bindActionCreators} from 'redux'\r\nimport {connect} from 'react-redux'\r\nimport {Button} from \"react-bootstrap\"\r\nimport {withRouter} from \"react-router\";\r\nimport editorActions from '../actions/editor'\r\nimport {fetch} from '../common/fetch'\r\nimport {\r\n    Form,\r\n    FormGroup,\r\n    ControlLabel,\r\n    FormControl\r\n} from 'react-bootstrap'\r\nimport Immutable from 'immutable'\r\nimport {stateToHTML} from '../components/draft-js-export-html'\r\nimport Alert from '../components/Alert';\r\nconst {\r\n    AtomicBlockUtils,\r\n    Editor,\r\n    EditorState,\r\n    Entity,\r\n    RichUtils,\r\n    CompositeDecorator,\r\n    Modifier,\r\n} = Draft;\r\nconst {Map} = Immutable;\r\nclass MediaEditorExample extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const decorator = new CompositeDecorator([\r\n            {\r\n                strategy: findLinkEntities,\r\n                component: Link,\r\n            },\r\n        ]);\r\n        this.state = {\r\n            editorState: EditorState.createEmpty(decorator),\r\n            showURLInput: false,\r\n            urlValue: '',\r\n            imgAlt:'',\r\n            set:false,\r\n        };\r\n\r\n        this.focus = () => this.refs.editor.focus();\r\n        this.onChange = (editorState) => this.setState({editorState});\r\n        this.handleKeyCommand = (command) => this._handleKeyCommand(command);\r\n        this.toggleBlockType = (type) => this._toggleBlockType(type);\r\n        this.toggleInlineStyle = (style) => this._toggleInlineStyle(style);\r\n        let options = {\r\n            inlineStyles: {\r\n                // Override default element (`strong`).\r\n                BOLD: {element: 'b'},\r\n                ITALIC: {\r\n                    // Add custom attributes. You can also use React-style `className`.\r\n                    attributes: {class: 'foo'},\r\n                    // Use camel-case. Units (`px`) will be added where necessary.\r\n                    style: {fontSize: 12}\r\n                },\r\n                CODE: {\r\n                    element: 'div',\r\n                    attributes: {class: 'auto'},\r\n                },\r\n                STRIKETHROUGH: {\r\n                    attributes: {class: 'mht'},\r\n                },\r\n                // Use a custom inline style. Default element is `span`.\r\n                red: {style: {color: 'rgba(255, 0, 0, 1.0)'}},\r\n                orange: {style: {color: 'rgba(255, 127, 0, 1.0)'}},\r\n                yellow: {style: {color: 'rgba(180, 180, 0, 1.0)'}},\r\n                green: {style: {color: 'rgba(0, 180, 0, 1.0)'}},\r\n                blue: {style: {color: 'rgba(0, 0, 255, 1.0)'}},\r\n                indigo: {style: {color: 'rgba(75, 0, 130, 1.0)'}},\r\n                violet: {style: {color: 'rgba(127, 0, 255, 1.0)'}},\r\n\r\n                yahei: {\r\n                    style:{ fontFamily:'Microsoft YaHei' }\r\n                },\r\n                SimSun: {\r\n                    style:{ fontFamily:'SimSun' }\r\n                },\r\n                SimHei: {\r\n                    style:{ fontFamily:'SimHei' }\r\n                },\r\n                arial:{\r\n                    style:{ fontFamily:'arial' }\r\n                },\r\n                line1: {\r\n                    style:{ lineHeight:'1.5' }\r\n                },\r\n                line2: {\r\n                    style:{ lineHeight:'2' }\r\n                },\r\n                line3:{\r\n                    style:{ lineHeight:'3' }\r\n                },\r\n                CENTER:{\r\n                    style:{\r\n                        textAlign: 'center',\r\n                        display: 'block'\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        //提交\r\n        this.logState = () => {\r\n           const {postEditor,consultantId,selectNoTag,selectTag,contentType,title,img,remark,userId} = this.props;\r\n            const content = this.state.editorState.getCurrentContent();\r\n\r\n            var stateStr = JSON.stringify(this.state.editorState);\r\n            //console.log(stateStr);\r\n            var allTag=selectNoTag.concat(selectTag);\r\n            let html = stateToHTML(content, options);\r\n            var id,role;\r\n            if(consultantId==0&&userId==0){\r\n                Alert.info({info:'请选择搭配师或用户'});\r\n                return;\r\n            }\r\n            else if(contentType==0){\r\n                Alert.info({info:'请选择内容分类'});\r\n                return;\r\n            }\r\n            if(consultantId==0&&userId!=0){\r\n                id=userId;\r\n                role=1;\r\n            }\r\n            if(consultantId!=0&&userId==0){\r\n                id=consultantId;\r\n                role=4;\r\n            }\r\n            if(consultantId!=0&&userId!=0){\r\n                id=consultantId;\r\n                role=4;\r\n            }\r\n            const params={\r\n                content:html,\r\n                title:title,\r\n                consultantId:id,\r\n                coverImage:img,\r\n                categoryId:contentType,\r\n                tags:allTag,\r\n                role:role,\r\n                /*editorState:stateStr,*/\r\n                remark:remark,\r\n            }\r\n            if(selectNoTag.length!=0){\r\n                Alert.confirm({title:'红色标签为未存在的标签',body:\"确定添加？\",surecb:function() {\r\n\r\n                    var that=this;\r\n                    postEditor({},params).then(function (obj) {\r\n                        if (obj.data.code == 1){\r\n                            Alert.info({info:'添加成功'});\r\n                            const decorator = new CompositeDecorator([\r\n                                {\r\n                                    strategy: findLinkEntities,\r\n                                    component: Link,\r\n                                },\r\n                            ]);\r\n\r\n                            that.setState({\r\n                                editorState: EditorState.createEmpty(decorator),\r\n                            })\r\n                        }\r\n                        else{\r\n                            Alert.info({info:obj.data.msg});\r\n                        }\r\n                    }.bind(this))\r\n\r\n\r\n                }\r\n                })\r\n            }\r\n            else{\r\n                postEditor({},params).then(function (obj) {\r\n                    if (obj.data.code == 1){\r\n                        Alert.info({info:'添加成功,可到内容列表发布'});\r\n                        const decorator = new CompositeDecorator([\r\n                            {\r\n                                strategy: findLinkEntities,\r\n                                component: Link,\r\n                            },\r\n                        ]);\r\n\r\n                        this.setState({\r\n                            editorState: EditorState.createEmpty(decorator),\r\n                        })\r\n                    }\r\n                    else{\r\n                        Alert.info({info:obj.data.msg});\r\n                    }\r\n                }.bind(this))\r\n            }\r\n\r\n        };\r\n        //images\r\n        this.confirmMedia = this._confirmMedia.bind(this);\r\n        //link\r\n        this.promptForLink = this._promptForLink.bind(this);\r\n        this.onURLChange = (e) => this.setState({urlValue: e.target.value});\r\n        this.confirmLink = this._confirmLink.bind(this);\r\n        this.onLinkInputKeyDown = this._onLinkInputKeyDown.bind(this);\r\n        this.removeLink = this._removeLink.bind(this);\r\n        //color\r\n        this.toggleColor = (toggledColor) => this._toggleColor(toggledColor);\r\n        //font\r\n        this.toggleFont = (toggledfont) => this._toggleFont(toggledfont);\r\n        //line\r\n        this.toggleLine = (toggledline) => this._toggleLine(toggledline);\r\n    }\r\n    //客户端初次加载初始化\r\n    componentDidMount() {\r\n        //const {id,queryEditor} = this.props;\r\n       // queryEditor({id:id},{})\r\n    }\r\n/*    componentWillReceiveProps(nextProps){\r\n        const list=nextProps.editor.list;\r\n        //editorState\r\n      console.log(list);\r\n      console.log(JSON.parse(list.editorState));\r\n      this.setState({\r\n            editorState: JSON.parse(list.editorState)\r\n        });\r\n    }*/\r\n    _handleKeyCommand(command) {\r\n        const {editorState} = this.state;\r\n        const newState = RichUtils.handleKeyCommand(editorState, command);\r\n        if (newState) {\r\n            this.onChange(newState);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    _toggleBlockType(blockType) {\r\n        this.onChange(\r\n            RichUtils.toggleBlockType(\r\n                this.state.editorState,\r\n                blockType\r\n            )\r\n        );\r\n    }\r\n\r\n    _toggleInlineStyle(inlineStyle) {\r\n        this.onChange(\r\n            RichUtils.toggleInlineStyle(\r\n                this.state.editorState,\r\n                inlineStyle\r\n            )\r\n        );\r\n    }\r\n    //media images\r\n    _confirmMedia(e) {\r\n        e.preventDefault();\r\n        var imgAlt=this.state.imgAlt;\r\n         var data = new FormData();\r\n         var file=document.getElementById('file');\r\n        if(!imgAlt){\r\n            Alert.info({info:'请输入图片描述'});\r\n            file.value='';\r\n            return;\r\n        }\r\n        for(var i=0;i<file.files.length;i++){\r\n            data.append('file', file.files[i]);\r\n        }\r\n         var config = {\r\n             progress: function(progressEvent) {\r\n                 var percentCompleted = progressEvent.loaded / progressEvent.total;\r\n             },\r\n         };\r\n        var that=this;\r\n        fetch().post('/api/upload', data, config)\r\n             .then(function (res) {\r\n                 const {editorState} = that.state;\r\n                  function addimg(oldstate,url)\r\n                  {\r\n                      var entityKey = Entity.create('image', 'IMMUTABLE', {src: url,alt:imgAlt});\r\n                      return AtomicBlockUtils.insertAtomicBlock(\r\n                  oldstate,\r\n                  entityKey,\r\n                  ' ')\r\n                  }\r\n                  var newstate = editorState;\r\n                  for(var i =0; i<res.data.length;i++){\r\n                  newstate = addimg(newstate,res.data[i].contentUri)\r\n                  }\r\n                 that.setState({\r\n                     editorState: newstate,\r\n                     imgAlt:'',\r\n                  });\r\n                 file.value='';\r\n             })\r\n             .catch(function (err) {\r\n               console.log('error');\r\n             });\r\n    }\r\n\r\n    //color\r\n    _toggleColor(toggledColor) {\r\n        const {editorState} = this.state;\r\n        const selection = editorState.getSelection();\r\n        // Let's just allow one color at a time. Turn off all active colors.\r\n        const nextContentState = Object.keys(colorStyleMap)\r\n            .reduce((contentState, color) => {\r\n                return Modifier.removeInlineStyle(contentState, selection, color)\r\n            }, editorState.getCurrentContent());\r\n\r\n        let nextEditorState = EditorState.push(\r\n            editorState,\r\n            nextContentState,\r\n            'change-inline-style'\r\n        );\r\n\r\n        const currentStyle = editorState.getCurrentInlineStyle();\r\n\r\n        // Unset style override for current color.\r\n        if (selection.isCollapsed()) {\r\n            nextEditorState = currentStyle.reduce((state, color) => {\r\n                return RichUtils.toggleInlineStyle(state, color);\r\n            }, nextEditorState);\r\n        }\r\n\r\n        // If the color is being toggled on, apply it.\r\n        if (!currentStyle.has(toggledColor)) {\r\n            nextEditorState = RichUtils.toggleInlineStyle(\r\n                nextEditorState,\r\n                toggledColor\r\n            );\r\n        }\r\n\r\n        this.onChange(nextEditorState);\r\n    }\r\n\r\n    //font\r\n    _toggleFont(toggledFont) {\r\n        const {editorState} = this.state;\r\n        const selection = editorState.getSelection();\r\n\r\n        // Let's just allow one color at a time. Turn off all active colors.\r\n        const nextContentState = Object.keys(fontStyleMap)\r\n            .reduce((contentState, font) => {\r\n                return Modifier.removeInlineStyle(contentState, selection, font)\r\n            }, editorState.getCurrentContent());\r\n\r\n        let nextEditorState = EditorState.push(\r\n            editorState,\r\n            nextContentState,\r\n            'change-inline-style'\r\n        );\r\n\r\n        const currentStyle = editorState.getCurrentInlineStyle();\r\n        // Unset style override for current color.\r\n        if (selection.isCollapsed()) {\r\n            nextEditorState = currentStyle.reduce((state, font) => {\r\n                return RichUtils.toggleInlineStyle(state, font);\r\n            }, nextEditorState);\r\n        }\r\n\r\n        // If the color is being toggled on, apply it.\r\n        if (!currentStyle.has(toggledFont)) {\r\n            nextEditorState = RichUtils.toggleInlineStyle(\r\n                nextEditorState,\r\n                toggledFont\r\n            );\r\n        }\r\n\r\n        this.onChange(nextEditorState);\r\n    }\r\n    //line\r\n    _toggleLine(toggledLine) {\r\n        const {editorState} = this.state;\r\n        const selection = editorState.getSelection();\r\n\r\n        // Let's just allow one color at a time. Turn off all active colors.\r\n        const nextContentState = Object.keys(lineStyleMap)\r\n            .reduce((contentState, line) => {\r\n                return Modifier.removeInlineStyle(contentState, selection, line)\r\n            }, editorState.getCurrentContent());\r\n\r\n        let nextEditorState = EditorState.push(\r\n            editorState,\r\n            nextContentState,\r\n            'change-inline-style'\r\n        );\r\n\r\n        const currentStyle = editorState.getCurrentInlineStyle();\r\n        // Unset style override for current color.\r\n        if (selection.isCollapsed()) {\r\n            nextEditorState = currentStyle.reduce((state, line) => {\r\n                return RichUtils.toggleInlineStyle(state, line);\r\n            }, nextEditorState);\r\n        }\r\n\r\n        // If the color is being toggled on, apply it.\r\n        if (!currentStyle.has(toggledLine)) {\r\n            nextEditorState = RichUtils.toggleInlineStyle(\r\n                nextEditorState,\r\n                toggledLine\r\n            );\r\n        }\r\n\r\n        this.onChange(nextEditorState);\r\n    }\r\n    //link\r\n    _promptForLink(e) {\r\n        e.preventDefault();\r\n        const {editorState} = this.state;\r\n        const selection = editorState.getSelection();\r\n        if (!selection.isCollapsed()) {\r\n            this.setState({\r\n                showURLInput: true,\r\n                urlValue: '',\r\n            }, () => {\r\n                setTimeout(() => this.refs.url.focus(), 0);\r\n            });\r\n        }\r\n    }\r\n\r\n    _confirmLink(e) {\r\n        e.preventDefault();\r\n        const {editorState, urlValue} = this.state;\r\n        const entityKey = Entity.create('LINK', 'MUTABLE', {url: urlValue});\r\n        this.setState({\r\n            editorState: RichUtils.toggleLink(\r\n                editorState,\r\n                editorState.getSelection(),\r\n                entityKey\r\n            ),\r\n            showURLInput: false,\r\n            urlValue: '',\r\n        }, () => {\r\n            setTimeout(() => this.refs.editor.focus(), 0);\r\n        });\r\n\r\n    }\r\n\r\n    _onLinkInputKeyDown(e) {\r\n        if (e.which === 13) {\r\n            this._confirmLink(e);\r\n        }\r\n    }\r\n\r\n    _removeLink(e) {\r\n        e.preventDefault();\r\n        const {editorState} = this.state;\r\n        const selection = editorState.getSelection();\r\n        if (!selection.isCollapsed()) {\r\n            this.setState({\r\n                editorState: RichUtils.toggleLink(editorState, selection, null),\r\n            });\r\n        }\r\n    }\r\nset(name,e){\r\n    this.state[name]=e.target.value;\r\n    this.setState({\r\n        set:!this.state.set,\r\n    })\r\n}\r\n\r\n    render() {\r\n        const {editorState} = this.state;\r\n        // If the user changes block type before entering any text, we can\r\n        // either style the placeholder or hide it. Let's just hide it now.\r\n        let className = 'RichEditor-editor';\r\n        var contentState = editorState.getCurrentContent();\r\n        if (!contentState.hasText()) {\r\n            if (contentState.getBlockMap().first().getType() !== 'unstyled') {\r\n                className += ' RichEditor-hidePlaceholder';\r\n            }\r\n        }\r\n        //link\r\n        let urlInput;\r\n        var fileoptions={\r\n\r\n        };\r\n        if (this.state.showURLInput) {\r\n            urlInput =\r\n                <div style={styles.urlInputContainer}>\r\n                    <input\r\n                        onChange={this.onURLChange}\r\n                        ref=\"url\"\r\n                        style={styles.urlInput}\r\n                        type=\"text\"\r\n                        value={this.state.urlValue}\r\n                        onKeyDown={this.onLinkInputKeyDown}\r\n                    />\r\n                    <button onMouseDown={this.confirmLink}>\r\n                        Confirm\r\n                    </button>\r\n                </div>;\r\n        }\r\n        return (\r\n            <div>\r\n                <div className=\"RichEditor-root\">\r\n                    <BlockStyleControls\r\n                        editorState={editorState}\r\n                        onToggle={this.toggleBlockType}\r\n                    />\r\n                    <InlineStyleControls\r\n                        editorState={editorState}\r\n                        onToggle={this.toggleInlineStyle}\r\n                    />\r\n                    <ColorControls\r\n                        editorState={editorState}\r\n                        onToggle={this.toggleColor}\r\n                    />\r\n                    <FontControls\r\n                        editorState={editorState}\r\n                        onToggle={this.toggleFont}\r\n                    />\r\n                    <LineControls\r\n                        editorState={editorState}\r\n                        onToggle={this.toggleLine}\r\n                    />\r\n                    <div style={{marginBottom: 10}}>\r\n                        <Form inline style={{marginBottom: 10}}>\r\n                            <FormGroup controlId=\"formInlineName\" className=\"m-r10\">\r\n                                <FormControl  type=\"text\" placeholder=\"图片alt\" value={this.state.imgAlt} onChange={this.set.bind(this,'imgAlt')}/>\r\n                            </FormGroup>\r\n                            <FormGroup controlId=\"formInlineName\" className=\"m-r10\">\r\n                                <FormControl  type=\"file\" name=\"file\" id=\"file\" multiple=\"true\" onChange={this._confirmMedia.bind(this)}/>\r\n                            </FormGroup>\r\n                        </Form>\r\n                        <button onMouseDown={this.promptForLink}\r\n                                style={{marginRight: 10}}>\r\n                            添加链接\r\n                        </button>\r\n                        <button onMouseDown={this.removeLink}>\r\n                            移除链接\r\n                        </button>\r\n                    </div>\r\n                    {urlInput}\r\n                    <div className={className} onClick={this.focus}>\r\n                        <Editor\r\n                            customStyleMap={styleMap}\r\n                            blockStyleFn={getBlockStyle}\r\n                            blockRendererFn={mediaBlockRenderer}\r\n                            editorState={editorState}\r\n                            handleKeyCommand={this.handleKeyCommand}\r\n                            onChange={this.onChange}\r\n                            placeholder=\"请编辑...\"\r\n                            ref=\"editor\"\r\n                            spellCheck={true}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <Button bsStyle=\"default\" className=\"m-t10 m-b40\" type=\"button\" onClick={this.logState}>确定</Button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nfunction getBlockStyle(block) {\r\n    switch (block.getType()) {\r\n        case 'blockquote':\r\n            return 'RichEditor-blockquote';\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nconst BLOCK_TYPES = [\r\n    {label: 'H4', style: 'header-four'},\r\n    {label: 'H5', style: 'header-five'},\r\n    {label: 'UL', style: 'unordered-list-item'},\r\n    {label: 'OL', style: 'ordered-list-item'}\r\n    // {label: 'Blockquote', style: 'blockquote'},\r\n    // {label: 'Code Block', style: 'code-block'},\r\n];\r\nconst BlockStyleControls = (props) => {\r\n    const {editorState} = props;\r\n    const selection = editorState.getSelection();\r\n    const blockType = editorState\r\n        .getCurrentContent()\r\n        .getBlockForKey(selection.getStartKey())\r\n        .getType();\r\n\r\n    return (\r\n        <div className=\"RichEditor-controls\">\r\n            <b>标签：</b>\r\n            {BLOCK_TYPES.map((type) =>\r\n                <StyleButton\r\n                    key={type.label}\r\n                    active={type.style === blockType}\r\n                    label={type.label}\r\n                    onToggle={props.onToggle}\r\n                    style={type.style}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nvar INLINE_STYLES = [\r\n    {label: '粗体', style: 'BOLD'},\r\n    {label: '斜体', style: 'ITALIC'},\r\n    /*{label:'漫画体',style:'STRIKETHROUGH'},*/\r\n    {label: '下划线', style: 'UNDERLINE'},\r\n    {label: '居中', style: 'CENTER'}\r\n];\r\nconst InlineStyleControls = (props) => {\r\n    var currentStyle = props.editorState.getCurrentInlineStyle();\r\n    return (\r\n        <div className=\"RichEditor-controls\">\r\n            <b>样式：</b>\r\n            {INLINE_STYLES.map(type =>\r\n                <StyleButton\r\n                    key={type.label}\r\n                    active={currentStyle.has(type.style)}\r\n                    label={type.label}\r\n                    onToggle={props.onToggle}\r\n                    style={type.style}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n//media images\r\nfunction mediaBlockRenderer(block) {\r\n    if (block.getType() === 'atomic') {\r\n        return {\r\n            component: Media,\r\n            editable: false,\r\n        };\r\n    }\r\n    return null;\r\n}\r\nconst Image = (props) => {\r\n    return <img src={props.src}/>;\r\n};\r\nconst Media = (props) => {\r\n    const entity = Entity.get(props.block.getEntityAt(0));\r\n    const {src} = entity.getData();\r\n    const type = entity.getType();\r\n\r\n    let media;\r\n    if (type === 'audio') {\r\n        media = <Audio src={src}/>;\r\n    } else if (type === 'image') {\r\n        media = <Image src={src}/>;\r\n    } else if (type === 'video') {\r\n        media = <Video src={src}/>;\r\n    }\r\n\r\n    return media;\r\n};\r\n//link\r\nfunction findLinkEntities(contentBlock, callback) {\r\n    contentBlock.findEntityRanges(\r\n        (character) => {\r\n            const entityKey = character.getEntity();\r\n            return (\r\n                entityKey !== null &&\r\n                Entity.get(entityKey).getType() === 'LINK'\r\n            );\r\n        },\r\n        callback\r\n    );\r\n}\r\nconst Link = (props) => {\r\n    const {url} = Entity.get(props.entityKey).getData();\r\n    return (\r\n        <a href={url} style={styles.link}>\r\n            {props.children}\r\n        </a>\r\n    );\r\n};\r\nclass StyleButton extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.onToggle = (e) => {\r\n            e.preventDefault();\r\n            this.props.onToggle(this.props.style);\r\n        };\r\n    }\r\n    render() {\r\n        let className = 'RichEditor-styleButton';\r\n        if (this.props.active) {\r\n            className += ' RichEditor-activeButton';\r\n        }\r\n        return (\r\n            <span className={className} onMouseDown={this.onToggle}>\r\n              {this.props.label}\r\n            </span>\r\n        );\r\n    }\r\n}\r\n//color\r\nclass StyleButton_color extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onToggle = (e) => {\r\n            e.preventDefault();\r\n            this.props.onToggle(this.props.style);\r\n        };\r\n    }\r\n    render() {\r\n        let style;\r\n        if (this.props.active) {\r\n            style = {...styles.styleButton, ...colorStyleMap[this.props.style]};\r\n        } else {\r\n            style = styles.styleButton;\r\n        }\r\n\r\n        return (\r\n            <span style={style} onMouseDown={this.onToggle}>\r\n              {this.props.label}\r\n            </span>\r\n        );\r\n    }\r\n}\r\nvar COLORS = [\r\n    {label: '红色', style: 'red'},\r\n    {label: '黄色', style: 'yellow'},\r\n    {label: '蓝色', style: 'blue'},\r\n];\r\nconst ColorControls = (props) => {\r\n    var currentStyle = props.editorState.getCurrentInlineStyle();\r\n    return (\r\n        <div style={styles.controls}>\r\n            <b>颜色：</b>\r\n            {COLORS.map(type =>\r\n                <StyleButton_color\r\n                    key={type.label}\r\n                    active={currentStyle.has(type.style)}\r\n                    label={type.label}\r\n                    onToggle={props.onToggle}\r\n                    style={type.style}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\nconst colorStyleMap = {\r\n    red: {\r\n        color: 'rgba(255, 0, 0, 1.0)',\r\n    },\r\n    orange: {\r\n        color: 'rgba(255, 127, 0, 1.0)',\r\n    },\r\n    yellow: {\r\n        color: 'rgba(180, 180, 0, 1.0)',\r\n    },\r\n    green: {\r\n        color: 'rgba(0, 180, 0, 1.0)',\r\n    },\r\n    blue: {\r\n        color: 'rgba(0, 0, 255, 1.0)',\r\n    },\r\n    indigo: {\r\n        color: 'rgba(75, 0, 130, 1.0)',\r\n    },\r\n    violet: {\r\n        color: 'rgba(127, 0, 255, 1.0)',\r\n    },\r\n};\r\n\r\n//font-family\r\n\r\nclass StyleButton_font extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onToggle = (e) => {\r\n            e.preventDefault();\r\n            this.props.onToggle(this.props.style);\r\n        };\r\n    }\r\n\r\n    render() {\r\n        let style;\r\n        if (this.props.active) {\r\n            style = {...styles.styleButton, color:'#3b5998'};\r\n        } else {\r\n            style = styles.styleButton;\r\n        }\r\n\r\n        return (\r\n            <span style={style} onMouseDown={this.onToggle}>\r\n              {this.props.label}\r\n            </span>\r\n        );\r\n    }\r\n}\r\nvar FONTS = [\r\n    {label: '雅黑', style: 'yahei'},\r\n];\r\n\r\nconst fontStyleMap = {\r\n    yahei: {\r\n        fontFamily:'Microsoft YaHei'\r\n    },\r\n    SimSun: {\r\n        fontFamily:'SimSun'\r\n    },\r\n    SimHei: {\r\n        fontFamily:'SimHei'\r\n    },\r\n    arial:{\r\n        fontFamily:'arial'\r\n    }\r\n};\r\n\r\nconst FontControls = (props) => {\r\n    var currentStyle = props.editorState.getCurrentInlineStyle();\r\n    return (\r\n        <div style={styles.controls}>\r\n            <b>字体：</b>\r\n            {FONTS.map(type =>\r\n                <StyleButton_font\r\n                    key={type.label}\r\n                    active={currentStyle.has(type.style)}\r\n                    label={type.label}\r\n                    onToggle={props.onToggle}\r\n                    style={type.style}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n//line-height\r\nclass StyleButton_line extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.onToggle = (e) => {\r\n            e.preventDefault();\r\n            this.props.onToggle(this.props.style);\r\n        };\r\n    }\r\n\r\n    render() {\r\n        let style;\r\n        if (this.props.active) {\r\n            style = {...styles.styleButton, color:'#3b5998'};\r\n        } else {\r\n            style = styles.styleButton;\r\n        }\r\n\r\n        return (\r\n            <span style={style} onMouseDown={this.onToggle}>\r\n              {this.props.label}\r\n            </span>\r\n        );\r\n    }\r\n}\r\nvar LINE = [\r\n    {label: '1.5倍', style: 'line1'},\r\n    {label: '2倍', style: 'line2'},\r\n    {label: '3倍', style: 'line3'},\r\n];\r\n\r\nconst lineStyleMap = {\r\n    line1: {\r\n        lineHeight:'1.5'\r\n    },\r\n    line2: {\r\n        lineHeight:'2'\r\n    },\r\n    line3: {\r\n        lineHeight:'3'\r\n    }\r\n};\r\n\r\nconst LineControls = (props) => {\r\n    var currentStyle = props.editorState.getCurrentInlineStyle();\r\n    return (\r\n        <div style={styles.controls}>\r\n            <b>行距：</b>\r\n            {LINE.map(type =>\r\n                <StyleButton_line\r\n                    key={type.label}\r\n                    active={currentStyle.has(type.style)}\r\n                    label={type.label}\r\n                    onToggle={props.onToggle}\r\n                    style={type.style}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst styleMap = {\r\n    ...colorStyleMap,\r\n    ...fontStyleMap,\r\n   ...lineStyleMap,\r\n};\r\n\r\nconst styles = {\r\n    root: {\r\n        fontFamily: '\\'Georgia\\', serif',\r\n        padding: 20,\r\n        width: 600,\r\n    },\r\n    buttons: {\r\n        marginBottom: 10,\r\n    },\r\n    urlInputContainer: {\r\n        marginBottom: 10,\r\n    },\r\n    urlInput: {\r\n        fontFamily: '\\'Georgia\\', serif',\r\n        marginRight: 10,\r\n        padding: 3,\r\n    },\r\n    editor: {\r\n        border: '1px solid #ccc',\r\n        cursor: 'text',\r\n        minHeight: 80,\r\n        padding: 10,\r\n    },\r\n    button: {\r\n        marginTop: 10,\r\n        textAlign: 'center',\r\n    },\r\n    link: {\r\n        color: '#3b5998',\r\n        textDecoration: 'underline',\r\n    },\r\n    controls: {\r\n        fontFamily: '\\'Helvetica\\', sans-serif',\r\n        fontSize: 14,\r\n        marginBottom: 10,\r\n        userSelect: 'none',\r\n    },\r\n    styleButton: {\r\n        color: '#999',\r\n        cursor: 'pointer',\r\n        marginRight: 16,\r\n        padding: '2px 0',\r\n    },\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        editor: state.editor\r\n    }\r\n}\r\n//将action的所有方法绑定到props上\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators(editorActions, dispatch)\r\n}\r\n\r\n//通过react-redux提供的connect方法将我们需要的state中的数据和actions中的方法绑定到props上\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(MediaEditorExample))\r\n\r\n\r\n\r\n\r\n"]}