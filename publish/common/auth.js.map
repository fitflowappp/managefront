{"version":3,"sources":["../../src/common/auth.js"],"names":["getMuser","getMToken","logout","load","auth_token","sessionId","dispatch","type","remove","push"],"mappings":";;;;;QAKgBA,Q,GAAAA,Q;QAIAC,S,GAAAA,S;QAMAC,M,GAAAA,M;;AAZhB;;;;AACA;;;;AAJA;;;AAKO,SAASF,QAAT,GAAoB;AACvB,WAAO,sBAAOG,IAAP,CAAY,OAAZ,CAAP;AACH;AACD,IAAIC,UAAJ;AACO,SAASH,SAAT,GAAqB;AACxB,QAAG,CAACG,UAAJ,EAAe;AACXA,qBAAaJ,aAAaA,WAAWK,SAAxB,GAAoC,IAAjD;AACH;AACD,WAAOD,UAAP;AACH;AACM,SAASF,MAAT,GAAkB;AACrB,WAAO,oBAAY;AACfI,iBAAS,EAACC,MAAM,QAAP,EAAT;AACA,8BAAOC,MAAP,CAAc,OAAd,EAAsB,EAAC,QAAQ,GAAT,EAAtB;AACAJ,qBAAa,IAAb;AACA,oCAAeK,IAAf,CAAoB,GAApB;AACH,KALD;AAMH","file":"auth.js","sourcesContent":["/**\r\n * Created by john on 2016/6/8.\r\n */\r\nimport cookie from 'react-cookie'\r\nimport {browserHistory} from 'react-router';\r\nexport function getMuser() {\r\n    return cookie.load(\"muser\")\r\n}\r\nvar auth_token;\r\nexport function getMToken() {\r\n    if(!auth_token){\r\n        auth_token = getMuser() ? getMuser().sessionId : null;\r\n    }\r\n    return auth_token;\r\n}\r\nexport function logout() {\r\n    return dispatch => {\r\n        dispatch({type: \"LOGOUT\"});\r\n        cookie.remove(\"muser\",{\"path\": '/'});\r\n        auth_token = null;\r\n        browserHistory.push('/');\r\n    }\r\n}"]}